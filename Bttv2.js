!function(){if(String.prototype.includes&&Array.prototype.findIndex&&!window.location.pathname.endsWith(".html")&&["www.twitch.tv","canary.twitch.tv","clips.twitch.tv","dashboard.twitch.tv"].includes(window.location.hostname)&&!window.Ember){var t=e("raven-js");t.config("https://24dfd2854f97465da5fb14fcea77278c@sentry.io/144851",{release:"f601a1d87d4a399a22fbdb8e04057195030b20de",environment:"production",captureUnhandledRejections:!1,ignoreErrors:["InvalidAccessError","out of memory","InvalidStateError","QuotaExceededError","NotFoundError","SecurityError","AbortError","TypeMismatchError","HierarchyRequestError","IndexSizeError",/^undefined$/],whitelistUrls:[/betterttv\.js/,/\.betterttv\.net/],shouldSendCallback:function(e){if(e.message&&e.message.includes("raven-js/src/raven"))return!1;var t=e.exception&&e.exception.values[0];return(!t||!["NS_ERROR_NOT_INITIALIZED","NS_ERROR_OUT_OF_MEMORY","NS_ERROR_FAILURE","NS_ERROR_FILE_CORRUPTED"].includes(t.type))&&!(e.exception&&e.exception.values.length<2)}}).install();var r=e("./utils/debug"),a=e("./watcher");try{e("./modules/anon_chat/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/anon_chat/index.js",e.stack)}try{e("./modules/auto_theater_mode/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/auto_theater_mode/index.js",e.stack)}try{e("./modules/chat/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/chat/index.js",e.stack)}try{e("./modules/chat_commands/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/chat_commands/index.js",e.stack)}try{e("./modules/chat_custom_timeouts/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/chat_custom_timeouts/index.js",e.stack)}try{e("./modules/chat_deleted_messages/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/chat_deleted_messages/index.js",e.stack)}try{e("./modules/chat_direction/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/chat_direction/index.js",e.stack)}try{e("./modules/chat_embedded_poll/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/chat_embedded_poll/index.js",e.stack)}try{e("./modules/chat_font_settings/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/chat_font_settings/index.js",e.stack)}try{e("./modules/chat_freeze/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/chat_freeze/index.js",e.stack)}try{e("./modules/chat_highlight_blacklist_keywords/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/chat_highlight_blacklist_keywords/index.js",e.stack)}try{e("./modules/chat_left_side/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/chat_left_side/index.js",e.stack)}try{e("./modules/chat_moderator_cards/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/chat_moderator_cards/index.js",e.stack)}try{e("./modules/chat_nicknames/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/chat_nicknames/index.js",e.stack)}try{e("./modules/chat_settings/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/chat_settings/index.js",e.stack)}try{e("./modules/chat_state/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/chat_state/index.js",e.stack)}try{e("./modules/chat_tab_completion/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/chat_tab_completion/index.js",e.stack)}try{e("./modules/clips/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/clips/index.js",e.stack)}try{e("./modules/conversations/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/conversations/index.js",e.stack)}try{e("./modules/directory_live_following/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/directory_live_following/index.js",e.stack)}try{e("./modules/disable_homepage_autoplay/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/disable_homepage_autoplay/index.js",e.stack)}try{e("./modules/disable_host_mode/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/disable_host_mode/index.js",e.stack)}try{e("./modules/disable_localized_names/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/disable_localized_names/index.js",e.stack)}try{e("./modules/disable_name_colors/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/disable_name_colors/index.js",e.stack)}try{e("./modules/doubleclick_mention/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/doubleclick_mention/index.js",e.stack)}try{e("./modules/emote_menu/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/emote_menu/index.js",e.stack)}try{e("./modules/emotes/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/emotes/index.js",e.stack)}try{e("./modules/global_css/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/global_css/index.js",e.stack)}try{e("./modules/hide_bits/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/hide_bits/index.js",e.stack)}try{e("./modules/hide_channel_points/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/hide_channel_points/index.js",e.stack)}try{e("./modules/hide_chat_clips/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/hide_chat_clips/index.js",e.stack)}try{e("./modules/hide_chat_events/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/hide_chat_events/index.js",e.stack)}try{e("./modules/hide_friends/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/hide_friends/index.js",e.stack)}try{e("./modules/hide_prime_promotions/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/hide_prime_promotions/index.js",e.stack)}try{e("./modules/hide_room_selector/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/hide_room_selector/index.js",e.stack)}try{e("./modules/hide_sidebar_elements/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/hide_sidebar_elements/index.js",e.stack)}try{e("./modules/host_button/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/host_button/index.js",e.stack)}try{e("./modules/legacy_subscribers/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/legacy_subscribers/index.js",e.stack)}try{e("./modules/send_message/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/send_message/index.js",e.stack)}try{e("./modules/settings/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/settings/index.js",e.stack)}try{e("./modules/split_chat/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/split_chat/index.js",e.stack)}try{e("./modules/video_player/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/video_player/index.js",e.stack)}try{e("./modules/vod_chat/index.js")}catch(e){t.captureException(e),r.error("Failed to ./modules/vod_chat/index.js",e.stack)}r.log("BetterTTV v".concat(r.version," loaded. ","production"," @ ","f601a1d87d4a399a22fbdb8e04057195030b20de")),window.BetterTTV={version:r.version,settings:e("./settings"),watcher:{emitLoad:function(e){return a.emit("load.".concat(e))}}}}}()},{"./modules/anon_chat/index.js":2,"./modules/auto_theater_mode/index.js":3,"./modules/chat/index.js":4,"./modules/chat_commands/index.js":5,"./modules/chat_custom_timeouts/index.js":6,"./modules/chat_deleted_messages/index.js":7,"./modules/chat_direction/index.js":8,"./modules/chat_embedded_poll/index.js":9,"./modules/chat_font_settings/index.js":10,"./modules/chat_freeze/index.js":11,"./modules/chat_highlight_blacklist_keywords/index.js":12,"./modules/chat_left_side/index.js":13,"./modules/chat_moderator_cards/index.js":14,"./modules/chat_nicknames/index.js":16,"./modules/chat_settings/index.js":17,"./modules/chat_state/index.js":18,"./modules/chat_tab_completion/index.js":20,"./modules/clips/index.js":21,"./modules/conversations/index.js":22,"./modules/directory_live_following/index.js":23,"./modules/disable_homepage_autoplay/index.js":24,"./modules/disable_host_mode/index.js":25,"./modules/disable_localized_names/index.js":26,"./modules/disable_name_colors/index.js":27,"./modules/doubleclick_mention/index.js":28,"./modules/emote_menu/index.js":29,"./modules/emotes/index.js":35,"./modules/global_css/index.js":39,"./modules/hide_bits/index.js":40,"./modules/hide_channel_points/index.js":41,"./modules/hide_chat_clips/index.js":42,"./modules/hide_chat_events/index.js":43,"./modules/hide_friends/index.js":44,"./modules/hide_prime_promotions/index.js":45,"./modules/hide_room_selector/index.js":46,"./modules/hide_sidebar_elements/index.js":47,"./modules/host_button/index.js":48,"./modules/legacy_subscribers/index.js":49,"./modules/send_message/index.js":50,"./modules/settings/index.js":51,"./modules/split_chat/index.js":52,"./modules/video_player/index.js":53,"./modules/vod_chat/index.js":54,"./settings":55,"./utils/debug":61,"./watcher":72,"raven-js":103}],2:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),i=e("../../settings"),s=e("../../watcher"),c=e("../../utils/twitch"),l=window.location.search.includes("bttv_anon_chat=true"),u=function(){function t(){var e=this;(0,n.default)(this,t),i.add({id:"anonChat",name:"Anon Chat",defaultValue:!1,description:"Join channels without appearing in chat"}),this.enabled=!1,s.on("load.chat",function(){return e.load()}),i.on("changed.anonChat",function(){return e.load()})}return(0,o.default)(t,[{key:"changeUser",value:function(e,t){var r=c.getChatServiceClient();if(r){var a=r.connection.ws;if(a&&r.configuration.username!==e){r.configuration.username=e,c.sendChatAdminMessage("BetterTTV: [Anon Chat] ".concat(t));try{a.send("QUIT")}catch(e){}}}}},{key:"part",value:function(){this.changeUser("justinfan12345","Logging you out of chat..."),this.enabled=!0}},{key:"join",value:function(){var e=c.getCurrentUser();e&&(this.changeUser(e.name,"Logging you into chat..."),this.enabled=!1)}},{key:"load",value:function(){this.enabled=!1,l||i.get("anonChat")?this.part():this.join()}},{key:"onSendMessage",value:function(e){this.enabled&&!e.message.startsWith("/join")&&(c.sendChatAdminMessage("You can't send messages when Anon Chat is enabled. Type /join or disable Anon Chat in options."),e.preventDefault())}}]),t}();t.exports=new u},{"../../settings":55,"../../utils/twitch":71,"../../watcher":72,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81}],3:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),i=e("jquery"),s=e("../../utils/twitch"),c=e("../../settings"),l=e("../../watcher"),u=function(){function t(){var e=this;(0,n.default)(this,t),c.add({id:"autoTheatreMode",name:"Automatic Theatre Mode",defaultValue:!1,description:"Automatically enables theatre mode"}),l.on("load.player",function(){return e.load()})}return(0,o.default)(t,[{key:"load",value:function(){if(!1!==c.get("autoTheatreMode")){var e=s.getCurrentPlayer();if(e)try{e.setTheatre(!0)}catch(e){0===i(".highwind-video-player--theatre").length&&i('button[data-a-target="player-theatre-mode-button"]').click()}}}}]),t}();t.exports=new u},{"../../settings":55,"../../utils/twitch":71,"../../watcher":72,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81,jquery:93}],4:[function(e,t,r){"use strict";function o(e,t){return'\n    <div class="tw-tooltip-wrapper tw-inline">\n        <img alt="Moderator" class="chat-badge bttv-chat-badge" src="'.concat(e,'" alt="" srcset="" data-a-target="chat-badge">\n        <div class="tw-tooltip tw-tooltip--up tw-tooltip--align-left" data-a-target="tw-tooltip-label" style="margin-bottom: 0.9rem;">').concat(t,"</div>\n    </div>\n")}var a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),i=a(e("@babel/runtime/helpers/createClass")),g=e("jquery"),s=e("../../watcher"),p=e("../../utils/colors"),f=e("../../utils/twitch"),c=e("../../utils/api"),l=e("../../utils/cdn"),m=e("../../utils/html"),y=e("../../settings"),b=e("../emotes"),_=e("../chat_nicknames"),k=e("../legacy_subscribers"),w=e("../split_chat"),v=/(^[~!@#$%\^&\*\(\)]+|[~!@#$%\^&\*\(\)]+$)/g,x=/^@([a-zA-Z\d_]+)$/,C=["567b5b520e984428652809b6"];var u=new Map,d=["nightbot","moobot"],h=[],z=!1,M=!1,j=!1;var S=function(){function e(){var r=this;(0,n.default)(this,e),s.on("chat.message",function(e,t){return r.messageParser(e,t)}),s.on("load.chat",function(){return g('textarea[data-test-selector="chat-input"]').attr("maxlength","500")}),s.on("channel.updated",function(e){var t=e.bots;h=t}),c.get("cached/badges").then(function(e){e.forEach(function(e){var t=e.name,r=e.badge;return u.set(t,r)})})}return(0,i.default)(e,[{key:"calculateColor",value:function(e){return p.calculateColor(e,y.get("darkenedMode"))}},{key:"customBadges",value:function(e,t){(d.includes(t.name)||h.includes(t.name))&&t.mod&&e.find('img.chat-badge[alt="Moderator"]').addClass("bttv-chat-badge").attr("srcset","").attr("src",l.url("tags/bot.png"));var r=e.find(".chat-badge").closest("span");r.length||(r=e.find("span.chat-line__username").prev("span"));var a=u.get(t.name);a&&r.append(o(a.svg,a.description));var n=f.getCurrentChannel();n&&"night"===n.name&&k.hasSubscription(t.name)&&r.append(o(l.url("tags/subscriber.png"),"Subscriber"))}},{key:"asciiOnly",value:function(e){z=e}},{key:"subsOnly",value:function(e){M=e}},{key:"modsOnly",value:function(e){j=e}},{key:"messageReplacer",value:function(e,t){for(var r,a=e.contents(),n=0,o=0;o<a.length;o++){var i=a[o];if(i.nodeType===window.Node.ELEMENT_NODE&&i.classList.contains("tw-tooltip-wrapper"))if(g(i).find(".chat-line__message--emote").length)continue;if(i.nodeType!==window.Node.ELEMENT_NODE||!i.classList.contains("chat-line__message--emote")){var s=void 0;if(i.nodeType===window.Node.ELEMENT_NODE&&"SPAN"===i.nodeName)s=g(i).text();else{if(i.nodeType!==window.Node.TEXT_NODE)continue;s=i.data}for(var c=s.split(" "),l=!1,u=0;u<c.length;u++){var d=c[u];if(d&&"string"==typeof d){var h=d.match(x);if(2<d.length&&"@"===d.charAt(0)&&h&&h[1])c[u]=(r=h[1],'<span class="mentioning">@'.concat(m.escape(r),"</span>")),l=!0;else{var p=b.getEligibleEmote(d,t)||b.getEligibleEmote(d.replace(v,""),t);p?(c[u]=C.includes(p.id)&&10<++n?"":p.toHTML(),l=!0):c[u]=m.escape(c[u])}}}if(l){var f=document.createElement("span");f.innerHTML=c.join(" "),i.parentNode.replaceChild(f,i)}}}}},{key:"messageParser",value:function(e,t){if(!e[0].__bttvParsed){w.render(e);var r=function(e){var t=e.user,r=e.badges;return{id:t.userID,name:t.userLogin,displayName:t.userDisplayName,color:t.color,mod:r.hasOwnProperty("moderator"),subscriber:r.hasOwnProperty("subscriber"),badges:r}}(t);if(r){var a=this.calculateColor(r.color),n=e.find(".chat-author__display-name,.chat-author__intl-login");if(n.css("color",a),k.hasGlow(r.name)&&!0===y.get("darkenedMode")){var o=p.getRgb(a);n.css("text-shadow","0 0 20px rgba(".concat(o.r,", ").concat(o.g,", ").concat(o.b,", 0.8)"))}this.customBadges(e,r);var i=_.get(r.name);i&&n.text(i);var s=e.attr("style");s&&s.includes("color:")&&e.css("color",a);var c=e.find('span[data-a-target="chat-message-text"],div.tw-tooltip-wrapper');(!0===j&&!r.mod||!0===M&&!r.subscriber||!0===z&&function(e){for(var t=0;t<e.length;t++)if(128<e.charCodeAt(t))return!0;return!1}(t.message))&&e.hide();var l=e.find(".mod-icon");if(l.length){var u=f.getUserIsOwnerFromTagsBadges(r.badges),d=f.getUserIsModeratorFromTagsBadges(r.badges),h=f.getCurrentUserIsOwner();(d&&!h||u)&&l.remove()}this.messageReplacer(c,r),e[0].__bttvParsed=!0}}}}]),e}();t.exports=new S},{"../../settings":55,"../../utils/api":58,"../../utils/cdn":59,"../../utils/colors":60,"../../utils/html":65,"../../utils/twitch":71,"../../watcher":72,"../chat_nicknames":16,"../emotes":35,"../legacy_subscribers":49,"../split_chat":52,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81,jquery:93}],5:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),d=e("moment"),h=e("../../utils/twitch"),p=e("../../utils/twitch-api"),f=e("../../utils/tmi-api"),g=e("../chat"),m=e("../anon_chat"),y={b:'Usage: "/b <login> [reason]" - Shortcut for /ban',chatters:'Usage: "/chatters" - Retrieces the number of chatters in the chat',followed:'Usage: "/followed" - Tells you for how long you have been following a channel',follows:'Usage: "/follows" - Retrieves the number of followers for the channel',join:'Usage: "/join" - Temporarily join a chat (anon chat)',localascii:'Usage "/localascii" - Turns on local ascii-only mode (only your chat is ascii-only mode)',localasciioff:'Usage "/localasciioff" - Turns off local ascii-only mode',localmod:'Usage "/localmod" - Turns on local mod-only mode (only your chat is mod-only mode)',localmodoff:'Usage "/localmodoff" - Turns off local mod-only mode',localsub:'Usage "/localsub" - Turns on local sub-only mode (only your chat is sub-only mode)',localsuboff:'Usage "/localsuboff" - Turns off local sub-only mode',massunban:'Usage "/massunban" - Unbans all users in the channel (channel owner only)',p:'Usage "/p <login> [reason]" - Shortcut for /purge',part:'Usage: "/part" - Temporarily leave a chat (anon chat)',purge:'Usage "/purge <login> [reason]" - Purges a user\'s chat',shrug:'Usage "/shrug" - Appends your chat line with a shrug face',sub:'Usage "/sub" - Shortcut for /subscribers',suboff:'Usage "/suboff" - Shortcut for /subscribersoff',t:'Usage "/t <login> [duration] [reason]" - Shortcut for /timeout',u:'Usage "/u <login>" - Shortcut for /unban',uptime:'Usage "/uptime" - Retrieves the amount of time the channel has been live',viewers:'Usage "/viewers" - Retrieves the number of viewers watching the channel'};function b(){var e=h.getCurrentUser(),t=h.getCurrentChannel();if(e&&e.id===t.id){var n=[],o=0;!function a(){h.sendChatAdminMessage("Fetching banned users...");p.graphqlQuery("\n            query Settings_ChannelChat_BannedChatters {\n                currentUser {\n                    bannedUsers {\n                        bannedUser {\n                            login\n                        }\n                    }\n                }\n            }\n        ").then(function(e){var t=e.data.currentUser.bannedUsers,r=[];try{r=t.filter(function(e){var t=e.bannedUser;return t&&t.login&&!n.includes(t.login)}).map(function(e){return e.bannedUser.login})}catch(e){return void h.sendChatAdminMessage("There was an error retrieving banned users.")}0!==r.length?(o+=r.length,h.sendChatAdminMessage("Starting purge of ".concat(r.length," users in 5 seconds.")),h.sendChatAdminMessage("This block of users will take ".concat((r.length/3).toFixed(1)," seconds to unban.")),setTimeout(function(){return function(t,r){var a=setInterval(function(){var e=t.shift();if(!e)return clearInterval(a),void r();n.push(e),h.sendChatMessage("/unban ".concat(e))},333)}(r,function(){h.sendChatAdminMessage("This block of users has been purged. Checking for more.."),a()})},5e3)):h.sendChatAdminMessage("You have no banned users. Total Unbanned Users: ".concat(o))})}()}else h.sendChatAdminMessage("You must be the channel owner to use this command.")}function i(e){var t=e.trim().split(" "),r=t.shift().toLowerCase();if(!r||"/"!==r.charAt(0))return!0;r=r.slice(1);var a=h.getCurrentChannel();switch(r){case"b":return"/ban ".concat(t.join(" "));case"p":case"purge":return"/timeout ".concat(t.shift()," 1 ").concat(t.join(" "));case"sub":return"/subscribers";case"suboff":return"/subscribersoff";case"t":return"/timeout ".concat(t.join(" "));case"u":case"unban":var n=t.shift()||"";if("all"!==n)return"/unban ".concat(n);case"massunban":case"unbanall":b();break;case"localascii":case"localasciioff":var o=!r.endsWith("off");g.asciiOnly(o),h.sendChatAdminMessage("Local ascii-only mode ".concat(o?"enabled":"disabled","."));break;case"localmod":case"localmodoff":var i=!r.endsWith("off");g.modsOnly(i),h.sendChatAdminMessage("Local mods-only mode ".concat(i?"enabled":"disabled","."));break;case"localsub":case"localsuboff":var s=!r.endsWith("off");g.subsOnly(s),h.sendChatAdminMessage("Local subs-only mode ".concat(s?"enabled":"disabled","."));break;case"shrug":return"".concat(t.join(" ")," Â¯\\_(ãƒ„)_/Â¯");case"squishy":return"notsquishY WHEN YOU NEED HIM notsquishY IN A JIFFY notsquishY USE THIS EMOTE notsquishY TO SUMMON SQUISHY notsquishY";case"join":case"part":"join"===r?m.join():m.part();break;case"chatters":f.get("group/user/".concat(a.name,"/chatters")).then(function(e){var t=e.chatter_count;return h.sendChatAdminMessage("Current Chatters: ".concat(t.toLocaleString()))}).catch(function(){return h.sendChatAdminMessage("Could not fetch chatter count.")});break;case"followed":var c=h.getCurrentUser();if(!c)break;p.get("users/".concat(c.id,"/follows/channels/").concat(a.id)).then(function(e){var t=e.created_at,r=d(t);h.sendChatAdminMessage("You followed ".concat(a.displayName," ").concat(r.fromNow()," (").concat(r.format("LLL"),")"))}).catch(function(){return h.sendChatAdminMessage("You do not follow ".concat(a.displayName,"."))});break;case"follows":p.get("channels/".concat(a.id)).then(function(e){var t=e.followers;return h.sendChatAdminMessage("Current Followers: ".concat(t.toLocaleString()))}).catch(function(){return h.sendChatAdminMessage("Could not fetch follower count.")});break;case"viewers":p.get("streams/".concat(a.id)).then(function(e){var t=e.stream,r=t?t.viewers:0;h.sendChatAdminMessage("Current Viewers: ".concat(r.toLocaleString()))}).catch(function(){return h.sendChatAdminMessage("Could not fetch stream.")});break;case"uptime":p.get("streams/".concat(a.id)).then(function(e){var t=e.stream,r=t?new Date(t.created_at):null;if(r){var a=Math.round((Date.now()-r.getTime())/1e3);h.sendChatAdminMessage("Current Uptime: ".concat(function(e){var t=Math.floor(e/86400),r=Math.floor(e/3600)-24*t,a=Math.floor(e/60)-1440*t-60*r,n=e-86400*t-3600*r-60*a;return(0<t?t+" day"+(1===t?"":"s")+", ":"")+(0<r?r+" hour"+(1==r?"":"s")+", ":"")+(0<a?a+" minute"+(1==a?"":"s")+", ":"")+n+" second"+(1==n?"":"s")}(a)))}else h.sendChatAdminMessage("Stream is not live")}).catch(function(){return h.sendChatAdminMessage("Could not fetch stream.")});break;case"help":var l=Object.keys(y),u=t.length&&t[0].replace(/^\//,"").toLowerCase();return u&&l.includes(u)?(h.sendChatAdminMessage(y[u]),!1):(u||h.sendChatAdminMessage('BetterTTV Chat Commands: (Use "/help <command>" for more info on a command) /'.concat(l.join(" /"))),!0);default:return!0}return!1}var s=function(){function e(){(0,n.default)(this,e)}return(0,o.default)(e,[{key:"onSendMessage",value:function(e){var t=i(e.message);!1===t&&e.preventDefault(),"string"==typeof t&&(e.message=t)}}]),e}();t.exports=new s},{"../../utils/tmi-api":69,"../../utils/twitch":71,"../../utils/twitch-api":70,"../anon_chat":2,"../chat":4,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81,moment:96}],6:[function(e,t,r){"use strict";var s,i,a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),c=e("jquery"),l=e("../../watcher"),u=e("../../utils/keycodes"),d=e("../../utils/twitch"),h='section[data-test-selector="chat-room-component-layout"]',p=".chat-line__message",f="".concat(p," .chat-line__username"),g="bttv-custom-timeout-contain",m='\n    <div id="'.concat(g,'">\n        <div class="text"></div>\n        <svg xmlns="http://www.w3.org/2000/svg" width="81" height="223">\n          <g fill="none" fill-rule="evenodd">\n            <path fill="#000" fill-opacity=".304" fill-rule="nonzero" d="M.5 0h80v20H.5zM.5 180h80v20H.5zM0 203h80v20H0z"/>\n            <path stroke="#ACACAC" stroke-opacity=".3" d="M80.5 19.805C64.51 51.825 70.65 154.184.5 180"/>\n            <path fill="#FFF" fill-rule="nonzero" d="M18.773 218v-10.84h3.603c1.074 0 1.942.12 2.604.359.662.24 1.234.645 1.718 1.216.766.908 1.15 2.104 1.15 3.589 0 1.801-.477 3.198-1.429 4.19-.952.99-2.292 1.486-4.02 1.486h-3.626zm1.538-1.15h1.97c1.406 0 2.402-.378 2.988-1.135.63-.806.945-1.887.945-3.245 0-1.274-.31-2.275-.93-3.003a2.863 2.863 0 0 0-1.348-.912c-.522-.163-1.308-.245-2.358-.245H20.31v8.54zm15.571.894c-.967.293-1.794.44-2.483.44-1.172 0-2.128-.39-2.867-1.17-.74-.778-1.11-1.787-1.11-3.028 0-1.206.326-2.194.978-2.966.652-.771 1.485-1.157 2.501-1.157.962 0 1.705.342 2.23 1.025.525.684.788 1.655.788 2.915l-.008.447h-5.017c.21 1.89 1.136 2.834 2.776 2.834.6 0 1.338-.16 2.212-.483v1.143zm-4.922-4.578h3.509c0-1.48-.552-2.22-1.656-2.22-1.108 0-1.726.74-1.853 2.22zM38.41 218v-11.565h1.443V218h-1.443zm10.166-.256c-.967.293-1.794.44-2.483.44-1.172 0-2.128-.39-2.867-1.17-.74-.778-1.11-1.787-1.11-3.028 0-1.206.326-2.194.978-2.966.652-.771 1.485-1.157 2.501-1.157.962 0 1.705.342 2.23 1.025.525.684.788 1.655.788 2.915l-.008.447h-5.017c.21 1.89 1.135 2.834 2.776 2.834.6 0 1.338-.16 2.212-.483v1.143zm-4.922-4.578h3.508c0-1.48-.551-2.22-1.655-2.22-1.108 0-1.726.74-1.853 2.22zm9.837 5.017c-.733 0-1.304-.21-1.714-.63-.41-.42-.616-1.003-.616-1.75v-4.673h-.996v-1.084h.996v-1.443l1.443-.14v1.583h2.08v1.084h-2.08v4.41c0 1.04.45 1.56 1.348 1.56.19 0 .422-.033.696-.096V218c-.445.122-.83.183-1.157.183zm9.052-.44c-.967.294-1.794.44-2.483.44-1.172 0-2.127-.39-2.867-1.168-.74-.779-1.11-1.788-1.11-3.029 0-1.206.326-2.194.978-2.966.652-.771 1.486-1.157 2.501-1.157.962 0 1.706.342 2.23 1.025.525.684.788 1.655.788 2.915l-.007.447h-5.018c.21 1.89 1.136 2.834 2.776 2.834.6 0 1.338-.16 2.212-.483v1.143zm-4.922-4.577h3.509c0-1.48-.552-2.22-1.656-2.22-1.108 0-1.726.74-1.853 2.22zM26.756 186.292c0 .483-.084.931-.253 1.344a3.22 3.22 0 0 1-.706 1.073c-.376.376-.82.658-1.333.846-.513.188-1.16.282-1.941.282h-1.45v4.065h-1.45v-10.906h2.958c.655 0 1.209.055 1.663.165.454.11.857.282 1.208.516.415.279.736.625.964 1.04.227.415.34.94.34 1.575zm-1.509.037c0-.376-.066-.704-.197-.982a1.645 1.645 0 0 0-.601-.681 2.42 2.42 0 0 0-.802-.326c-.3-.066-.68-.099-1.139-.099h-1.435v4.358h1.223c.586 0 1.062-.052 1.428-.157.366-.105.664-.273.893-.502.23-.234.392-.481.487-.74a2.51 2.51 0 0 0 .143-.871zm10.093 7.573h-1.377v-.908a6.705 6.705 0 0 1-1.333.842 3.326 3.326 0 0 1-1.406.293c-.86 0-1.528-.263-2.007-.787-.478-.525-.718-1.296-.718-2.311v-5.31h1.377v4.658c0 .415.02.77.059 1.066.039.295.122.548.249.758.132.214.303.37.513.468.21.098.515.147.915.147.357 0 .746-.093 1.168-.278a5.455 5.455 0 0 0 1.183-.71v-6.11h1.377v8.182zm7.815-6.68h-.073a5.045 5.045 0 0 0-1.282-.139c-.425 0-.835.094-1.23.282-.396.188-.777.43-1.143.729v5.808H38.05v-8.181h1.377v1.208c.547-.44 1.03-.75 1.447-.934a3.153 3.153 0 0 1 1.278-.274c.239 0 .412.006.52.018.107.012.268.035.483.07v1.413zm7.932 5.75c0 1.386-.315 2.404-.945 3.054-.63.65-1.599.974-2.907.974-.435 0-.859-.03-1.271-.092a9.846 9.846 0 0 1-1.22-.26v-1.406h.074c.224.088.58.197 1.069.326.488.13.977.194 1.465.194.469 0 .857-.056 1.164-.168.308-.113.547-.269.718-.469.171-.19.293-.42.366-.688.074-.269.11-.57.11-.901v-.747c-.415.332-.812.58-1.19.743-.378.164-.86.245-1.447.245-.976 0-1.751-.352-2.325-1.058-.574-.706-.86-1.7-.86-2.985 0-.703.098-1.31.296-1.82.198-.51.468-.95.81-1.322a3.29 3.29 0 0 1 1.157-.809c.454-.193.905-.29 1.355-.29.473 0 .87.048 1.19.143.32.096.658.241 1.014.436l.088-.351h1.29v7.25zm-1.377-1.319v-4.46a5.333 5.333 0 0 0-1.022-.355 4.28 4.28 0 0 0-.94-.107c-.758 0-1.353.254-1.788.762-.434.508-.652 1.245-.652 2.212 0 .918.161 1.614.484 2.087.322.474.857.71 1.604.71.4 0 .802-.076 1.205-.23a4.37 4.37 0 0 0 1.11-.619zm10.935-1.699h-6.028c0 .503.076.941.227 1.315.152.373.36.68.623.919.254.234.555.41.905.527.349.118.733.176 1.153.176a4.56 4.56 0 0 0 1.681-.333c.564-.222.966-.44 1.205-.656h.073v1.502a11.36 11.36 0 0 1-1.42.49 5.765 5.765 0 0 1-1.524.198c-1.358 0-2.417-.367-3.179-1.102-.762-.735-1.142-1.779-1.142-3.131 0-1.338.364-2.4 1.094-3.186.73-.786 1.691-1.18 2.883-1.18 1.103 0 1.954.323 2.552.967.598.645.897 1.56.897 2.747v.747zm-1.34-1.055c-.005-.722-.187-1.281-.546-1.677-.359-.395-.904-.593-1.637-.593-.737 0-1.324.217-1.761.652-.437.434-.685.974-.744 1.618h4.688zM35.065 11.985c0 .542-.102 1.02-.307 1.435a2.9 2.9 0 0 1-.828 1.026c-.41.322-.86.552-1.351.688-.49.137-1.115.205-1.871.205H26.84V4.434h3.23c.796 0 1.392.029 1.787.087.396.06.774.181 1.136.367.4.21.69.48.871.809.18.33.271.724.271 1.183 0 .517-.132.958-.395 1.322a2.847 2.847 0 0 1-1.055.875v.059c.737.151 1.318.475 1.743.97.425.496.637 1.122.637 1.879zM32.626 7.07c0-.263-.043-.486-.131-.666a1.02 1.02 0 0 0-.425-.44 2.06 2.06 0 0 0-.835-.245 12.934 12.934 0 0 0-1.216-.048h-1.728v3.15h1.875c.454 0 .815-.023 1.084-.07.268-.046.517-.143.747-.29.23-.146.391-.335.487-.567.095-.232.142-.506.142-.824zm.93 4.973c0-.439-.065-.788-.197-1.047-.132-.259-.371-.478-.718-.66a2.407 2.407 0 0 0-.853-.237 11.454 11.454 0 0 0-1.22-.055h-2.277v4.058h1.918c.635 0 1.155-.033 1.56-.1.406-.065.738-.186.997-.362a1.84 1.84 0 0 0 .6-.652c.127-.244.19-.559.19-.945zm9.815 3.296h-1.37v-.871a25.28 25.28 0 0 0-.494.348 4.094 4.094 0 0 1-1.395.637 4.284 4.284 0 0 1-1.048.113c-.737 0-1.362-.244-1.875-.732-.512-.488-.769-1.11-.769-1.868 0-.62.133-1.122.4-1.505.266-.383.645-.685 1.138-.904.499-.22 1.097-.369 1.795-.447A36.096 36.096 0 0 1 42 9.934v-.212c0-.313-.054-.572-.164-.777a1.2 1.2 0 0 0-.473-.483 1.954 1.954 0 0 0-.703-.227 6.057 6.057 0 0 0-.857-.059c-.361 0-.764.048-1.208.143a9.395 9.395 0 0 0-1.377.414h-.073V7.334c.268-.073.656-.154 1.164-.242a8.793 8.793 0 0 1 1.502-.132c.576 0 1.077.048 1.505.143.427.095.797.258 1.11.487.307.225.541.515.702.872.162.356.242.798.242 1.326v5.551zm-1.37-2.014v-2.278c-.42.025-.914.061-1.483.11-.569.05-1.019.12-1.351.213-.396.112-.715.286-.96.523-.244.237-.366.563-.366.978 0 .469.142.822.425 1.058.283.237.715.356 1.297.356a3.08 3.08 0 0 0 1.325-.282 5.97 5.97 0 0 0 1.113-.678zm10.862 2.014h-1.377v-4.658a8.02 8.02 0 0 0-.066-1.058c-.044-.33-.124-.587-.241-.773a1.114 1.114 0 0 0-.528-.458c-.23-.1-.527-.15-.893-.15a2.86 2.86 0 0 0-1.18.279c-.41.185-.803.422-1.179.71v6.108h-1.377V7.16H47.4v.907c.43-.356.874-.634 1.333-.835.46-.2.93-.3 1.414-.3.884 0 1.558.266 2.021.798.464.533.696 1.3.696 2.3v5.31z"/>\n          </g>\n        </svg>\n        <div class="cursor"></div>\n    </div>\n'),y={CANCEL:"cancel",TIMEOUT:"timeout",BAN:"ban",DELETE:"delete"};function b(e,t){var r=c("#".concat(g));if(r.length&&e.which!==u.DOMVKCancel){var a,n;if(r.is(":hover"))if(s.type===y.BAN?a="/ban":s.type===y.TIMEOUT?(a="/timeout",n=s.length):s.type===y.DELETE&&d.sendChatMessage("/delete ".concat(t)),a){var o=e.shiftKey?function(e){return prompt("Enter ".concat(e," reason: (leave blank for none)"))||""}(s.type):"";d.sendChatMessage("".concat(a," ").concat(i).concat(n?" ".concat(n):"").concat(o?" ".concat(o):""))}r.remove()}}function _(e){var t=c("#".concat(g));if(t.length){var r,a=e.pageY-t.offset().top,n=e.pageX-t.offset().left,o=224-a,i=Math.floor(60*Math.pow(1.5,(o-45)/6.5));r=0<Math.floor(i/60/60/24)?"".concat(Math.floor(i/60/60/24)," Days"):0<Math.floor(i/60/60)?"".concat(Math.floor(i/60/60)," Hours"):"".concat(Math.floor(i/60)," Minutes"),224<o||o<0||83<n||n<0?s={type:y.CANCEL,length:0,text:"CANCEL"}:45<o&&o<204?s={type:y.TIMEOUT,length:i,text:r}:204<=o&&o<=224?s={type:y.BAN,length:0,text:"BAN"}:22<o&&o<=45?s={type:y.TIMEOUT,length:1,text:"PURGE"}:0<o&&o<=22&&(s={type:y.DELETE,length:0,text:"DELETE"}),t.find(".text").text(s.text),t.find(".cursor").css("top",a)}}function k(e){if(d.getCurrentUserIsModerator()){e.preventDefault();var t=c(e.currentTarget).closest(p),r=d.getChatMessageObject(t[0]);r&&(i=r.user.userLogin,function(e,t){if(!c("#".concat(g)).length){var r=c(h);r.append(m);var a=c("#".concat(g));a.css({top:e.offset().top+e.height()/2-a.height()/2,left:r.offset().left-a.width()+r.width()-20}),s={type:y.CANCEL,length:0,text:"CANCEL"},a.on("mousemove",_),a.on("mousedown",function(e){return b(e,t)})}}(c(e.currentTarget),r.id))}}var w=function(){function t(){var e=this;(0,n.default)(this,t),l.on("load.chat",function(){return e.loadClickHandler()})}return(0,o.default)(t,[{key:"loadClickHandler",value:function(){c(h).off("contextmenu",f,k).on("contextmenu",f,k).off("click",b).on("click",b)}}]),t}();t.exports=new w},{"../../utils/keycodes":66,"../../utils/twitch":71,"../../watcher":72,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81,jquery:93}],7:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),i=e("jquery"),s=e("../../watcher"),c=e("../../utils/twitch"),l=e("../../settings"),u="bttv-chat-line-deleted";var d=function(){function e(){var t=this;(0,n.default)(this,e),l.add({id:"showDeletedMessages",name:"Show Deleted Messages",defaultValue:!1,description:"Turn this on to change <message deleted> back to users' messages."}),l.add({id:"hideDeletedMessages",name:"Remove Deleted Messages",defaultValue:!1,description:"Completely removes timed out messages from view"}),s.on("chat.message.handler",function(e){t.handleMessage(e)})}return(0,o.default)(e,[{key:"handleMessage",value:function(e){var t=e.message,r=e.preventDefault;switch(t.type){case c.TMIActionTypes.CLEAR_CHAT:c.sendChatAdminMessage("Chat was cleared by a moderator (Prevented by BetterTTV)"),r();break;case c.TMIActionTypes.MODERATION:if(this.handleDelete(t.userLogin||t.user.userLogin)){r();var a=c.getChatBuffer();a&&(a.state.messages.push(t),a.onBufferUpdate())}}}},{key:"handleDelete",value:function(e){var r=l.get("showDeletedMessages"),a=l.get("hideDeletedMessages");return!(!a&&!r)&&(function(r){return Array.from(document.querySelectorAll(".chat-line__message")).filter(function(e){var t=c.getChatMessageObject(e);return!!t&&(!!i(e).is(":visible")&&(!e.classList.contains(u)&&t.user.userLogin===r))})}(e).forEach(function(e){var t=i(e);a?t.hide():r&&(t.toggleClass(u,!0),t.find("a.link-fragment").each(function(){i(this).removeAttr("href")}),t.find(".chat-card__link").remove())}),!0)}}]),e}();t.exports=new d},{"../../settings":55,"../../utils/twitch":71,"../../watcher":72,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81,jquery:93}],8:[function(e,t,r){"use strict";var a,n=e("@babel/runtime/helpers/interopRequireDefault"),o=n(e("@babel/runtime/helpers/classCallCheck")),i=n(e("@babel/runtime/helpers/createClass")),s=e("jquery"),c=e("../../settings"),l=e("../../utils/twitch"),u=function(){function t(){var e=this;(0,o.default)(this,t),c.add({id:"reverseChatDirection",name:"Reverse Chat Messages Direction",defaultValue:!1,description:"New chat messages come from the top"}),c.on("changed.reverseChatDirection",function(){return e.toggleChatDirection()}),c.on("load.chat",function(){return e.toggleChatAutoScrolling()}),this.toggleChatDirection()}return(0,i.default)(t,[{key:"toggleChatAutoScrolling",value:function(){var e=l.getChatScroller(),t=c.get("reverseChatDirection");e&&(t&&e.scroll.scrollToTop&&e.scrollToBottom?(a!==e.scroll.scrollToTop&&(a=e.scrollToBottom),e.scrollToBottom=e.scroll.scrollToTop,s(".chat-list .chat-list__lines .simplebar-scroll-content")[0].scrollTop=0):a&&(e.scrollToBottom=a))}},{key:"toggleChatDirection",value:function(){s("body").toggleClass("bttv-chat-direction-reversed",c.get("reverseChatDirection")),this.toggleChatAutoScrolling()}}]),t}();t.exports=new u},{"../../settings":55,"../../utils/twitch":71,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81,jquery:93}],9:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),s=e("jquery"),i=e("../../watcher"),c=e("../../utils/twitch"),l=/strawpoll\.me\/([0-9]+)/g,u=null,d=null,h=function(){function e(){var r=this;(0,n.default)(this,e),i.on("chat.message",function(e,t){return r.onChat(e,t)})}return(0,o.default)(e,[{key:"onChat",value:function(e,t){var r=l.exec(e.text());if(r&&t.badges){var a=c.getUserIsModeratorFromTagsBadges(t.badges),n=c.getUserIsOwnerFromTagsBadges(t.badges);if(a||n){var o=r[1],i=s("#bttv-poll-contain");i.length&&o===d||i.length&&i.children(".frame").is(":visible")||(i.length&&i.remove(),s(".chat-list").append(function(e){return'\n    <div id="bttv-poll-contain">\n        <div class="title">\n            New poll available! \n            <span style="text-decoration: underline;">Vote now!</span>\n        </div>\n        <div class="close">\n            <svg class="svg-close" height="16px" version="1.1" viewbox="0 0 16 16" width="16px" x="0px" y="0px">\n                <path clip-rule="evenodd"\n                      d="M13.657,3.757L9.414,8l4.243,4.242l-1.415,1.415L8,9.414l-4.243,4.243l-1.414-1.415L6.586,8L2.343,3.757l1.414-1.414L8,6.586l4.242-4.243L13.657,3.757z"\n                      fill-rule="evenodd" />\n            </svg>\n        </div>\n        <iframe class="frame" src="https://www.strawpoll.me/embed_1/'.concat(e,'"></iframe>\n    </div>\n')}(o)),i=s("#bttv-poll-contain"),null!==u&&clearTimeout(u),u=setTimeout(function(){i&&!i.children(".frame").is(":visible")&&i.remove()},3e4),i.children(".close").on("click",function(){i.remove()}),i.children(".title").on("click",function(){i.children(".frame").show(),i.children(".title").text("Thanks!"),i.css("height","450px")}),i.slideDown(200),d=o)}}}}]),e}();t.exports=new h},{"../../utils/twitch":71,"../../watcher":72,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81,jquery:93}],10:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),i=e("jquery"),s=e("../../watcher"),c=e("../../storage"),l=e("../../utils/html"),u="bttv-font-size",d=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function h(e,t){var r=prompt(e,c.get(t)||"");null!==r&&(r=r.trim(),c.set(t,r))}var p,f=function(e,t){return'\nsection[data-test-selector="chat-room-component-layout"] .chat-list__lines, .whispers .thread-message__message {\n    font-family: '.concat(e?function(e){return d.includes(e)?e:'"'.concat(l.escape(e),'", sans-serif')}(e):"inherit"," !important;\n    font-size: ").concat(t?"".concat(l.escape(t),"px"):"inherit"," !important;\n}\n")};function g(){p=p||i('<style id="'.concat(u,'" />')).appendTo("body");var e=f(c.get("chatFontFamily"),c.get("chatFontSize"));p.html(e)}var m=function(){function e(){(0,n.default)(this,e),s.on("load",g),c.on("changed.chatFontFamily",g),c.on("changed.chatFontSize",g)}return(0,o.default)(e,[{key:"setFontFamily",value:function(){h('Enter a font family for chat.\n\nTry "monospace" or "Comic Sans MS", or leave the field blank to use the default.',"chatFontFamily")}},{key:"setFontSize",value:function(){h("Enter a font size for chat.\n\nLeave the field blank to use the default.","chatFontSize")}}]),e}();t.exports=new m},{"../../storage":57,"../../utils/html":65,"../../watcher":72,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81,jquery:93}],11:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault")(e("@babel/runtime/helpers/classCallCheck")),n=e("jquery"),o=e("../../utils/twitch"),i=e("../../utils/keycodes"),s=[i.Ctrl,i.Meta],c=0;function l(e){return s.includes(e.charCode||e.keyCode)&&n("".concat(".chat-list",":hover")).length&&!document.hidden}t.exports=new function e(){(0,a.default)(this,e),n("body").on("keydown.chat-freeze",function(e){c++,l(e)&&(c=0)}).on("keyup.chat-freeze",function(e){!l(e)||0<c||function(e){var t=o.getChatScroller();t&&t.setState({isAutoScrolling:e})}(0<n(".chat-list__more-messages").length)})}},{"../../utils/keycodes":66,"../../utils/twitch":71,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/interopRequireDefault":81,jquery:93}],12:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),i=e("jquery"),s=e("../../watcher"),c=e("../../settings"),l=e("../../storage"),u=e("../../utils/html"),d=e("../../utils/twitch"),h=e("../../utils/cdn"),p=e("moment"),f=e("../../utils/regex").escape,g=/\{.+?\}/g,m=/\(.+?\)/g,y=/\s\s+/g,b="bttv-pin-container";function _(e){if("string"==typeof e)return e;var t=d.getCurrentUser();return t?t.name:""}function k(e,t){var r=l.get(t);"highlightKeywords"===t&&(r=_(r));var a=prompt(e,r||"");null!==a&&(a=a.trim().replace(y," "),l.set(t,a))}function w(t){var r=[],a=[],e=t.match(g);e&&e.forEach(function(e){t=t.replace(e,""),r.push(e.slice(1,-1).trim())});var n=t.match(m);return n&&n.forEach(function(e){t=t.replace(e,""),a.push(e.slice(1,-1).trim())}),t.split(" ").forEach(function(e){e&&r.push(e)}),{computedKeywords:r,computedUsers:a}}var v=0,x=[],C=[];function z(){var e=l.get("blacklistKeywords");"string"!=typeof e&&(e="");var t=w(e),r=t.computedKeywords,a=t.computedUsers;x=r,C=a}var M,j=[],S=[];function T(){var e=w(_(l.get("highlightKeywords"))),t=e.computedKeywords,r=e.computedUsers;j=t,S=r}function D(e,t){var r=!0,a=!1,n=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done);r=!0){if(o.value.toLowerCase()===t)return!0}}catch(e){a=!0,n=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw n}}return!1}function I(e,t,r){var a=!0,n=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done);a=!0){var c=i.value;c=f(c),c=c.replace(/\*/g,"[^ ]*"),c=c.replace(/^<(.*)>$/g,"^$1$$");var l=d.getCurrentUser();if((l&&t!==l.name||!l)&&new RegExp("(\\s|^|@)".concat(c,"([!.,:';?/]|\\s|$)"),"i").test(r))return!0}}catch(e){n=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(n)throw o}}return!1}var E=function(){function e(){var r=this;(0,n.default)(this,e),s.on("load.chat",function(){return r.loadChat()}),s.on("load.vod",function(){return r.loadChat()}),s.on("chat.message",function(e,t){return r.onMessage(e,t)}),s.on("vod.message",function(e){return r.onVODMessage(e)}),l.on("changed.blacklistKeywords",z),l.on("changed.highlightKeywords",T),c.add({id:"pinnedHighlights",name:"Pin Highlighted Messages",defaultValue:!1,description:"Pin your ten latest highlighted messages right above chat"}),c.on("changed.pinnedHighlights",function(e){return!0===e?r.loadPinnedHighlights():r.unloadPinnedHighlights()}),c.add({id:"timeoutHighlights",name:"Timeout Pinned Highlights",defaultValue:!1,description:"Automatically hide pinned highlights after 1 minute"}),c.add({id:"highlightFeedback",name:"Play Sound on Highlight/Whisper",description:"Get audio feedback for messages directed at you",defaultValue:!1}),this.sound=null,this.handleHighlightSound=this.handleHighlightSound.bind(this)}return(0,o.default)(e,[{key:"handleHighlightSound",value:function(){this.sound||(this.sound=new Audio(h.url("assets/sounds/ts-tink.ogg"))),this.sound.pause(),this.sound.currentTime=0,this.sound.play()}},{key:"loadChat",value:function(){z(),T(),this.loadPinnedHighlights(),v=Date.now()}},{key:"setBlacklistKeywords",value:function(){k("Type some blacklist keywords. Messages containing keywords will be filtered from your chat.\n\nUse spaces in the field to specify multiple keywords. Place {} around a set of words to form a phrase, <> inside the {} to use exact search, and () around a single word to specify a username. Wildcards (*) are supported.","blacklistKeywords")}},{key:"setHighlightKeywords",value:function(){k("Type some highlight keywords. Messages containing keywords will turn red to get your attention.\n\nUse spaces in the field to specify multiple keywords. Place {} around a set of words to form a phrase, <> inside the {} to use exact search, and () around a single word to specify a username. Wildcards (*) are supported.","highlightKeywords")}},{key:"onMessage",value:function(e,t){var r=t.user,a=t.timestamp,n=t.messageParts,o=r.userLogin,i=function(e){return e.map(function(e){switch(e.type){case 0:return e.content.trim();case 3:return e.content;case 4:return e.content.recipient;case 5:return e.content.url;case 6:return e.content.alt}}).join(" ")}(n),s=new Date(a);if(D(C,o)||I(x,o,i))return this.markBlacklisted(e);(D(S,o)||I(j,o,i))&&(this.markHighlighted(e),c.get("highlightFeedback")&&this.handleHighlightSound(),v<a&&this.pinHighlight({from:o,message:i,date:s}))}},{key:"onVODMessage",value:function(e){var t=e.find(".video-chat__message-author").attr("href").split("?")[0].split("/").pop(),r=e.find('div[data-test-selector="comment-message-selector"]'),a=Array.from(r.find(".chat-line__message--emote")).map(function(e){return e.getAttribute("alt")}),n="".concat(r.text().replace(/^:/,"")," ").concat(a.join(" "));if(D(C,t)||I(x,t,n))return this.markBlacklisted(e);(D(S,t)||I(j,t,n))&&this.markHighlighted(e)}},{key:"markHighlighted",value:function(e){e.addClass("bttv-highlighted")}},{key:"markBlacklisted",value:function(e){e.attr("style","display: none !important;")}},{key:"loadPinnedHighlights",value:function(){!1===c.get("pinnedHighlights")||i("#".concat(b)).length||(M=i('<div id="'.concat(b,'" />')).appendTo(i(".chat-list .chat-list__lines")))}},{key:"unloadPinnedHighlights",value:function(){M&&M.remove()}},{key:"pinHighlight",value:function(e){var t=e.from,r=e.message,a=e.date;if(!1!==c.get("pinnedHighlights")&&M){10<M.children().length+1&&M.children().first().remove();var n=p(a).format("hh:mm"),o=i(function(e){var t=e.timestamp,r=e.from,a=e.message;return'\n    <div id="'.concat("bttv-pinned-highlight",'">\n        <span class="close">\n            <svg class="svg-close" height="8px" version="1.1" viewBox="0 0 16 16" width="8px" x="0px" y="0px">\n                <path clip-rule="evenodd" d="M13.657,3.757L9.414,8l4.243,4.242l-1.415,1.415L8,9.414l-4.243,4.243l-1.414-1.415L6.586,8L2.343,3.757l1.414-1.414L8,6.586l4.242-4.243L13.657,3.757z" fill-rule="evenodd"></path>\n            </svg>\n        </span>\n        <span class="time">').concat(t,'</span>\n        <span class="display-name">').concat(u.escape(r),'</span>\n        <span class="message">').concat(u.escape(a),"</span>\n    </div>\n")}({timestamp:n,from:t,message:r}));o.children(".close").on("click",function(){return o.remove()}),M.append(o),!0===c.get("timeoutHighlights")&&setTimeout(function(){return o.remove()},6e4)}}}]),e}();t.exports=new E},{"../../settings":55,"../../storage":57,"../../utils/cdn":59,"../../utils/html":65,"../../utils/regex":67,"../../utils/twitch":71,"../../watcher":72,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81,jquery:93,moment:96}],13:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),i=e("jquery"),s=e("../../settings"),c=function(){function t(){var e=this;(0,n.default)(this,t),s.add({id:"leftSideChat",name:"Left Side Chat",defaultValue:!1,description:"Moves the chat to the left of the player"}),s.on("changed.leftSideChat",function(){return e.toggleLeftSideChat()}),this.toggleLeftSideChat()}return(0,o.default)(t,[{key:"toggleLeftSideChat",value:function(){i("body").toggleClass("bttv-swap-chat",s.get("leftSideChat"))}}]),t}();t.exports=new c},{"../../settings":55,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81,jquery:93}],14:[function(e,t,r){"use strict";var s,a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),c=e("jquery"),i=e("../../watcher"),l=e("../../utils/twitch"),u=e("./moderator-card");var d=function(){function e(){var t=this;(0,n.default)(this,e),i.on("chat.moderator_card.open",function(e){return t.onOpen(e)}),i.on("chat.moderator_card.close",function(){return t.onClose()}),c("body").on("keydown.modCard",function(e){return t.onKeyDown(e)})}return(0,o.default)(e,[{key:"onOpen",value:function(o){var i=this,e=l.getChatModeratorCardProps(o[0]);if(e){var t=e.data;(t.targetUser?Promise.resolve(t.targetUser):e.data.refetch().then(function(e){var t=e.data.targetUser;return t||Promise.reject("no target user in data")})).then(function(e){if(!s||s.user.id!==e.id){i.onClose();var t=!1,r=!1,a=function(r){return Array.from(c(".chat-line__message")).reverse().map(function(e){return{message:l.getChatMessageObject(e),outerHTML:e.outerHTML}}).filter(function(e){var t=e.message;return t&&t.user&&t.user.userLogin===r})}(e.login);if(a.length){var n=a[a.length-1].message;t=l.getUserIsOwnerFromTagsBadges(n.badges),r=l.getUserIsModeratorFromTagsBadges(n.badges)}(s=new u(o,{id:e.id,name:e.login,isOwner:t,isModerator:r},a,function(){return i.onClose(!1)})).render()}})}}},{key:"onClose",value:function(e){0<arguments.length&&void 0!==e&&!e||!s||s.cleanup(),s=null}},{key:"onKeyDown",value:function(e){s&&s.onKeyDown(e)}}]),e}();t.exports=new d},{"../../utils/twitch":71,"../../watcher":72,"./moderator-card":15,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81,jquery:93}],15:[function(e,t,r){"use strict";function a(e,t,r,a){return'\n    <div class="tw-tooltip-wrapper tw-inline-flex">\n        <div class="bttv-moderator-card-action" data-command="'.concat(p.escape(e),'" data-duration="').concat(p.escape(t)||"",'">\n            <button class="tw-button__text">\n                ').concat(p.escape(a),'\n            </button>\n        </div>\n        <div class="tw-tooltip tw-tooltip--up tw-tooltip--align-center">').concat(p.escape(r),"</div>\n    </div>\n")}function o(e,t){return'\n    <div class="tw-stat tw-pd-l-1">\n        <span class="tw-stat__icon">'.concat(e,'</span>\n        <span class="tw-stat__value">').concat(p.escape(t),"</span>\n    </div>\n")}var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),c=e("jquery"),l=e("moment"),u=e("../chat_nicknames"),d=e("../../utils/twitch"),h=e("../../utils/twitch-api"),p=e("../../utils/html"),f=e("../../utils/keycodes"),g="/ban",m="/unban",y="/timeout",b="!permit",_="/ignore",k="/w",w='<figure class="tw-svg"><svg class="tw-svg__asset tw-svg__asset--glyphviews tw-svg__asset--inherit" width="16px" height="16px" version="1.1" viewBox="0 0 16 16" x="0px" y="0px"><path clip-rule="evenodd" d="M11,13H5L1,9V8V7l4-4h6l4,4v1v1L11,13z M8,5C6.344,5,5,6.343,5,8c0,1.656,1.344,3,3,3c1.657,0,3-1.344,3-3C11,6.343,9.657,5,8,5z M8,9C7.447,9,7,8.552,7,8s0.447-1,1-1s1,0.448,1,1S8.553,9,8,9z" fill-rule="evenodd"></path></svg></figure>',v='<figure class="tw-svg"><svg class="tw-svg__asset tw-svg__asset--heart tw-svg__asset--inherit" width="16px" height="16px" version="1.1" viewBox="0 0 16 16" x="0px" y="0px"><path clip-rule="evenodd" d="M8,14L1,7V4l2-2h3l2,2l2-2h3l2,2v3L8,14z" fill-rule="evenodd"></path></svg></figure>',x='<figure class="tw-svg"><svg class="tw-svg__asset tw-svg__asset--edit tw-svg__asset--inherit" width="16px" height="16px" version="1.1" viewBox="0 0 16 16" x="0px" y="0px"><path clip-rule="evenodd" d="M6.414,12.414L3.586,9.586l8-8l2.828,2.828L6.414,12.414z M4.829,14H2l0,0v-2.828l0.586-0.586l2.828,2.828L4.829,14z" fill-rule="evenodd"></path></svg></figure>',C='<figure class="tw-svg"><svg class="tw-svg__asset tw-svg__asset--heart tw-svg__asset--inherit" width="16px" height="16px" viewBox="0 0 1792 1792"><path d="M1792 1408v384h-1792v-384q45 0 85-14t59-27.5 47-37.5q30-27 51.5-38t56.5-11q24 0 44 7t31 15 33 27q29 25 47 38t58 27 86 14q45 0 85-14.5t58-27 48-37.5q21-19 32.5-27t31-15 43.5-7q35 0 56.5 11t51.5 38q28 24 47 37.5t59 27.5 85 14 85-14 59-27.5 47-37.5q30-27 51.5-38t56.5-11q34 0 55.5 11t51.5 38q28 24 47 37.5t59 27.5 85 14zm0-320v192q-24 0-44-7t-31-15-33-27q-29-25-47-38t-58-27-85-14q-46 0-86 14t-58 27-47 38q-22 19-33 27t-31 15-44 7q-35 0-56.5-11t-51.5-38q-29-25-47-38t-58-27-86-14q-45 0-85 14.5t-58 27-48 37.5q-21 19-32.5 27t-31 15-43.5 7q-35 0-56.5-11t-51.5-38q-28-24-47-37.5t-59-27.5-85-14q-46 0-86 14t-58 27-47 38q-30 27-51.5 38t-56.5 11v-192q0-80 56-136t136-56h64v-448h256v448h256v-448h256v448h256v-448h256v448h64q80 0 136 56t56 136zm-1280-864q0 77-36 118.5t-92 41.5q-53 0-90.5-37.5t-37.5-90.5q0-29 9.5-51t23.5-34 31-28 31-31.5 23.5-44.5 9.5-67q38 0 83 74t45 150zm512 0q0 77-36 118.5t-92 41.5q-53 0-90.5-37.5t-37.5-90.5q0-29 9.5-51t23.5-34 31-28 31-31.5 23.5-44.5 9.5-67q38 0 83 74t45 150zm512 0q0 77-36 118.5t-92 41.5q-53 0-90.5-37.5t-37.5-90.5q0-29 9.5-51t23.5-34 31-28 31-31.5 23.5-44.5 9.5-67q38 0 83 74t45 150z" /></svg></figure>',z='\n    <span class="bttv-moderator-card-actions">\n        '.concat(a(b,null,"!permit User","!permit"),"\n        ").concat(a(y,1,"Purge","1s"),"\n        ").concat(a(y,600,"Timeout 10m","10m"),"\n        ").concat(a(y,3600,"Timeout 1hr","1h"),"\n        ").concat(a(y,28800,"Timeout 8hr","8h"),"\n        ").concat(a(y,86400,"Timeout 24hr","24h"),"\n    </span>\n"),M='\n    <button class="tw-button-icon tw-button-icon--overlay bttv-moderator-card-nickname-change-button">\n        <span class="tw-button-icon__icon">'.concat(x,"</span>\n    </button>\n"),j=function(){function n(e,t,r,a){(0,i.default)(this,n),this.$element=c(e),this.user=t,this.messages=r,this.onClose=a}return(0,s.default)(n,[{key:"close",value:function(){c('button[data-test-selector="close-viewer-card"]').click(),this.cleanup(),this.onClose()}},{key:"cleanup",value:function(){c(".bttv-moderator-card-nickname-change-button").remove(),c(".bttv-moderator-card-user-stats").remove(),c(".bttv-moderator-card-actions").remove(),c(".bttv-moderator-card-messages").remove()}},{key:"render",value:function(){this.renderNicknameChangeButton(),this.renderUserStats(),this.renderModeratorActions(),this.renderUserMessages()}},{key:"renderNicknameChangeButton",value:function(){var e=this,t=this.$element.find(".viewer-card__display-name").children().first();if(!t.find(".bttv-moderator-card-nickname-change-button").length){var r=c(M);r.appendTo(t),r.on("click",function(){return u.set(e.user.name)})}}},{key:"renderUserStats",value:function(){var t=this.$element.find(".viewer-card__overlay");t.find(".bttv-moderator-card-user-stats").length||h.get("channels/".concat(this.user.id)).then(function(e){return function(e,t,r){return'\n    <div class="bttv-moderator-card-user-stats">\n        <div class="tw-flex tw-full-width">\n            '.concat(o(w,e.toLocaleString()),"\n            ").concat(o(v,t.toLocaleString()),"\n            ").concat(o(C,l(r).format("MMM D, YYYY")),"\n        </div>\n    </div>\n")}(e.views,e.followers,e.created_at)}).then(function(e){return c(e).appendTo(t)})}},{key:"renderModeratorActions",value:function(){var o=this,e=this.$element.find('button[data-test-selector="ban-button"]').closest(".viewer-card-drag-cancel");if(!e.find(".bttv-moderator-card-actions").length){var t=d.getCurrentUser(),r=d.getCurrentUserIsOwner(),a=d.getCurrentUserIsModerator(),n=t.name===this.user.name,i=this.user.isOwner||this.user.isModerator;if(!n&&(r||a&&!i)){var s=c(z);s.appendTo(e),s.find(".bttv-moderator-card-action").on("click",function(e){var t=e.currentTarget,r=c(t),a=r.data("command"),n=r.data("duration");d.sendChatMessage("".concat(a," ").concat(o.user.name).concat(n?" ".concat(n):""))})}}}},{key:"renderUserMessages",value:function(){if(!this.$element.find(".bttv-moderator-card-messages").length){var e=d.getCurrentUser(),t=d.getCurrentUserIsOwner(),r=d.getCurrentUserIsModerator(),a=e.name===this.user.name,n=this.user.isOwner||this.user.isModerator;if(!(!a&&(t||r&&!n))){var o=this.$element.find('div[data-test-selector="viewer-card-social-actions"]'),i=c(function(e){return'\n    <div class="bttv-moderator-card-messages tw-c-background-base">\n        <div class="label">\n            <span>Chat Messages</span>\n            <div class="triangle"></div>\n        </div>\n        <div class="message-list">\n            '.concat(e.join("\n"),"\n        </div>\n    </div>\n")}(this.messages.map(function(e){return e.outerHTML})));o.after(i),i.find(".label").on("click",function(){i.find(".triangle").toggleClass("open"),i.find(".message-list").toggle()})}}}},{key:"onKeyDown",value:function(e){if(!(e.ctrlKey||e.metaKey||e.shiftKey||c("input, textarea, select").is(":focus"))){var t=e.keyCode||e.which;if(t===f.Esc)return this.close();if(d.getCurrentUserIsModerator()){var r,a;switch(t){case f.T:r=y;break;case f.P:r=y,a=1;break;case f.A:r=b;break;case f.U:r=m;break;case f.B:r=g}if(r)return d.sendChatMessage("".concat(r," ").concat(this.user.name).concat(a?" ".concat(a):"")),void this.close()}if(t===f.I)d.sendChatMessage("".concat(_," ").concat(this.user.name)),this.close();else if(t===f.W){e.preventDefault();var n=c('textarea[data-a-target="chat-input"]');n.val("".concat(k," ").concat(this.user.name," ")),n.focus(),this.close()}}}}]),n}();t.exports=j},{"../../utils/html":65,"../../utils/keycodes":66,"../../utils/twitch":71,"../../utils/twitch-api":70,"../chat_nicknames":16,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81,jquery:93,moment:96}],16:[function(e,t,r){"use strict";var a,n=e("@babel/runtime/helpers/interopRequireDefault"),o=n(e("@babel/runtime/helpers/classCallCheck")),i=n(e("@babel/runtime/helpers/createClass")),s=e("../../storage"),c=function(){function e(){(0,o.default)(this,e),a=s.get("nicknames")||{}}return(0,i.default)(e,[{key:"set",value:function(e){var t=prompt("Enter the new nickname for ".concat(e," (Leave blank to reset)"));if(null!==t)return t=t.trim(),a[e]=t,s.set("nicknames",a),t}},{key:"get",value:function(e){return a[e]||null}}]),e}();t.exports=new c},{"../../storage":57,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81}],17:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),i=e("jquery"),s=e("../../watcher"),c=e("../settings"),l=e("../chat_highlight_blacklist_keywords"),u=e("../chat_font_settings"),d=".chat-settings__content",h="bttv-chat-settings",p='\n    <div class="'.concat(h,' tw-border-t tw-mg-t-2 tw-pd-t-2">\n        <div class="tw-mg-y-05 tw-pd-x-05"><p class="tw-c-text-alt-2 tw-font-size-6 tw-strong tw-upcase">BetterTTV</p></div>\n        <div class="tw-full-width tw-relative">\n            <button class="setBlacklistKeywords tw-pd-05 tw-block tw-border-radius-medium tw-full-width tw-interactable--alpha tw-interactable--hover-enabled tw-interactable tw-interactive">Set Blacklist Keywords</button>\n        </div>\n        <div class="tw-full-width tw-relative">\n            <button class="setHighlightKeywords tw-pd-05 tw-block tw-border-radius-medium tw-full-width tw-interactable--alpha tw-interactable--hover-enabled tw-interactable tw-interactive">Set Highlight Keywords</button>\n        </div>\n        <div class="tw-full-width tw-relative">\n            <button class="setFontFamily tw-pd-05 tw-block tw-border-radius-medium tw-full-width tw-interactable--alpha tw-interactable--hover-enabled tw-interactable tw-interactive">Set Font</button>\n        </div>\n        <div class="tw-full-width tw-relative">\n            <button class="setFontSize tw-pd-05 tw-block tw-border-radius-medium tw-full-width tw-interactable--alpha tw-interactable--hover-enabled tw-interactable tw-interactive">Set Font Size</button>\n        </div>\n        <div class="tw-full-width tw-relative">\n            <button class="clearChat tw-pd-05 tw-block tw-border-radius-medium tw-full-width tw-interactable--alpha tw-interactable--hover-enabled tw-interactable tw-interactive">Clear My Chat</button>\n        </div>\n        <div class="tw-full-width tw-relative">').concat(i(".twilight-minimal-root").length?"":'<button class="openSettings tw-pd-05 tw-block tw-border-radius-medium tw-full-width tw-interactable--alpha tw-interactable--hover-enabled tw-interactable tw-interactive">BetterTTV Settings</button>',"</div>\n    </div>\n");var f=function(){function t(){var e=this;(0,n.default)(this,t),s.on("load.chat",function(){return e.load()}),this.renderSettings=this.renderSettings.bind(this)}return(0,o.default)(t,[{key:"load",value:function(){i('button[data-a-target="chat-settings"]').off("click",this.renderSettings).on("click",this.renderSettings)}},{key:"renderSettings",value:function(){var e=this;if(!function(){try{return!!window.frameElement}catch(e){return!0}}()){var t=i(d).find(".".concat(h));t.length&&t.remove(),i(d).length||setTimeout(function(){return e.renderSettings()},100),i(d).append(p),(t=i(d).find(".".concat(h))).find(".openSettings").click(c.openSettings),t.find(".clearChat").click(function(e){e.preventDefault(),i(".chat-line__message").hide()}),t.find(".setHighlightKeywords").click(l.setHighlightKeywords),t.find(".setBlacklistKeywords").click(l.setBlacklistKeywords),t.find(".setFontFamily").click(u.setFontFamily),t.find(".setFontSize").click(u.setFontSize)}}}]),t}();t.exports=new f},{"../../watcher":72,"../chat_font_settings":10,"../chat_highlight_blacklist_keywords":12,"../settings":51,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81,jquery:93}],18:[function(e,t,r){"use strict";var g,a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),m=e("jquery"),i=e("../../watcher"),y=e("../../utils/twitch"),b="bttv-channel-state-contain",_=e("./template")(b),k=".rooms-header",w="svg.tw-svg__asset--unlock",v='button[data-a-target="chat-settings"]',s=Symbol();function c(e){if(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];g.apply(void 0,[e].concat(r))}if(!e){var n=y.getChatBuffer();if(!n)return;var o,i=n.state.messages;if(!i)return;for(var s=i.length-1;0<=s;s--)if(i[s].type===y.TMIActionTypes.ROOM_STATE){o=i[s];break}if(!o)return;e=o.state}!function(){var e=m("#".concat(b)),t=m(k),r=m(v);t.length&&!t.find(w).length?e.length||r.before(_):e.remove()}();var c=m("#".concat(b));if(c.length){var l=e,u=l.slowMode,d=l.slowModeDuration,h=l.emoteOnly,p=l.subsOnly,f=l.r9k;u&&c.find(".slow-time").attr("title","".concat(d," seconds")).text(function(e){var t=new Date(0);for(t.setSeconds(e),t=(t=t.toISOString().substr(11,8)).split(":");"00"===t[0];)t.shift();return 1===t.length&&"0"===t[0].charAt(0)&&(t[0]=parseInt(t[0],10)),t.join(":")}(d)),c.find(".slow").css({display:u?"block":"none"}),c.find(".slow-time").css({display:u?"block":"none"}),c.find(".r9k").css({display:f?"block":"none"}),c.find(".subs-only").css({display:p?"block":"none"}),c.find(".emote-only").css({display:h?"block":"none"})}}var l=function(){function t(){var e=this;(0,n.default)(this,t),i.on("load.chat",function(){return e.patch()})}return(0,o.default)(t,[{key:"patch",value:function(){var e=y.getChatController();e&&(c(),e._bttvOnRoomStateUpdatedPatched!==s&&e.onRoomStateUpdated!==c&&(e._bttvOnRoomStateUpdatedPatched=s,g=e.onRoomStateUpdated,e.onRoomStateUpdated=c,e.forceUpdate()))}}]),t}();t.exports=new l},{"../../utils/twitch":71,"../../watcher":72,"./template":19,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81,jquery:93}],19:[function(e,t,r){"use strict";t.exports=function(e){return'\n    <div id="'.concat(e,'">\n        <div title="Emote-Only Mode Enabled" class="emote-only">\n            <svg width="17px" height="22px" version="1.1" viewBox="0 0 17 22" x="0px" y="0px">\n                <path clip-rule="evenodd" fill-rule="evenodd" fill="#d3d3d3" stroke="none" d="M2.6324991,11.9006154 C2.78860502,11.8241282 2.54710102,8.86915385 3.5226074,7.97930769 C4.23150464,7.33266667 5.40470391,7.76430769 6.34639948,7.66307692 C6.75546484,7.61910256 7.57413063,7.73889744 7.57413536,7.53658974 C7.57413536,7.53658974 6.80517364,7.60384615 6.68402681,7.31520513 C6.34756394,6.5135641 7.30737143,5.61681795 7.94245618,5.03833077 C8.44068027,4.58448462 9.11937181,4.22597179 9.7840605,4.24774103 C10.6392582,4.27571538 11.4779037,4.79768974 12.0860643,5.41781795 C12.7299974,6.07438205 13.0222067,7.03230769 13.3137987,7.91605128 C13.6154103,8.83017949 13.8202417,10.7621795 13.8202417,10.7621795 C14.0003257,10.8057692 14.1950356,9.6594359 14.2652962,9.08612821 C14.4473014,7.60105128 13.9898682,6.0711 14.2346008,4.59558718 C14.2803951,4.31951026 14.539587,4.0835359 14.5108426,3.80499744 C14.4126813,2.85392051 13.8356716,1.85851026 13.0375594,1.36999744 C12.7379786,1.18663846 12.3325813,1.3915359 11.9939829,1.30674103 C11.4065057,1.15958718 10.9319304,0.656048718 10.3365417,0.547792308 C10.0436605,0.494535897 9.73909489,0.665561538 9.44643267,0.611048718 C9.08148154,0.543048718 8.79601412,0.217587179 8.43355043,0.136689744 C7.60361337,-0.0485410256 6.72122274,-0.0213102564 5.88599871,0.136689744 C5.3477493,0.238510256 4.8283741,0.461253846 4.35132898,0.737535897 C4.04626314,0.914202564 3.80820348,1.19325385 3.5226074,1.40161282 C3.10571785,1.70579231 2.61053618,1.90035641 2.2334848,2.25545897 C1.71687527,2.74199744 1.30745328,3.34661282 0.944362443,3.96312564 C0.664117036,4.43897179 0.375490475,4.93535641 0.269107783,5.48104872 C0.0876779638,6.41169231 0.264613213,7.38315385 0.361187986,8.32717949 C0.42219543,8.92351282 0.24819509,9.68289744 0.668122081,10.0980769 C0.832027059,10.2601282 1.14653448,10.0760256 1.34337624,10.1929487 C1.94985726,10.5529231 2.45279294,11.9886923 2.6324991,11.9006154 L2.6324991,11.9006154 Z"></path>\n                <path clip-rule="evenodd" fill-rule="evenodd" fill="#d3d3d3" stroke="none" d="M7.16830032,15.6739744 C7.98797005,15.7095897 8.48119959,15.5921538 9.21708516,15.6265385 C9.32997452,15.6319231 9.44173652,15.6609487 9.5547105,15.6581795 C9.99878448,15.6471538 10.5752815,15.4754103 11.0126485,15.5553846 C11.1839001,15.5867179 11.4810619,15.5661538 11.488396,15.7451282 C11.4971313,15.9583846 11.1462164,15.973359 10.95126,16.0455641 C10.5344621,16.1998974 10.0063476,16.5011026 9.50417769,16.5180769 C8.73866131,16.5439744 7.92089767,15.9493333 7.2373609,15.9902051 C7.12735319,15.9968718 7.05820575,15.6692051 7.16830032,15.6739744 L7.16830032,15.6739744 Z"></path>\n                <path clip-rule="evenodd" fill-rule="evenodd" fill="#d3d3d3" stroke="none" d="M9.72352566,14.5750513 C9.80714059,14.5296154 10.0086646,14.6712821 10.0692044,14.6580256 C10.3709827,14.5919487 11.0543938,13.7776154 11.036968,13.7519231 C11.0163119,13.7214615 10.157946,14.5207692 9.95600145,14.4908462 C9.82108471,14.4708462 9.72721638,14.2517949 9.67364738,14.2113846 C9.44633063,14.0399744 9.02271864,13.7841282 8.74133715,13.7528462 C8.45995466,13.7215641 8.18715093,13.7076154 8.12746921,13.8793333 C8.06778774,14.0510769 8.24961027,14.1227949 8.40370982,14.2272051 C8.55780937,14.3316154 8.94171683,14.5149487 9.04827,14.4169487 C9.15482566,14.3189231 9.09433312,14.318 9.01757701,14.2272051 C8.9408209,14.1364103 8.57292516,14.1625641 8.52648301,14.0690769 C8.48004111,13.9756154 8.45196373,14.0294872 8.55717649,13.9742051 C8.6623895,13.9189487 8.94280937,14.0648974 9.14035145,14.1639487 C9.33789104,14.2630256 9.56506095,14.6611795 9.72352566,14.5750513 L9.72352566,14.5750513 Z"></path>\n                <path clip-rule="evenodd" fill-rule="evenodd" fill="#d3d3d3" stroke="none" d="M10.3680858,12.0847179 C10.3680858,12.0847179 9.85991072,10.7944615 9.86164534,10.3928462 C9.86313855,10.057359 10.1363567,9.73784615 10.4141266,9.56274359 C10.8057091,9.31587179 11.3209148,9.37938462 11.7799831,9.38089744 C12.1981449,9.38346154 12.6854648,9.30061538 13.0230652,9.55482051 C13.2059539,9.6925641 13.5275397,10.2670769 13.3146524,10.1873077 C12.2404999,9.78476923 11.6433193,9.89933333 11.340008,9.97712821 C11.0996107,10.0387692 11.6461813,9.92464103 12.152363,10.1231282 C12.6411363,10.3147949 13.084399,10.7257692 12.8663028,10.827 C12.7067705,10.9010769 10.621382,10.7967949 10.5038935,10.8123846 C9.929701,10.8880769 10.3680858,12.4646154 10.3680858,12.0848205 L10.3680858,12.0847179 Z"></path>\n                <path clip-rule="evenodd" fill-rule="evenodd" fill="#d3d3d3" stroke="none" d="M5.43941215,10.0842051 C5.61166817,10.0264103 6.14531948,9.78535897 6.62377618,9.76515385 C6.92551414,9.75233333 6.62808161,9.88330769 6.92978697,9.86974359 C7.26501495,9.85461538 7.89803335,9.89830769 8.56953158,9.68825641 C8.72466916,9.63971795 8.65619914,9.47053846 8.51122959,9.39574359 C8.11319559,9.19038462 7.50843351,9.23653846 7.07287357,9.33125641 C6.88602215,9.37189744 6.6654281,9.4844359 6.44347174,9.55735897 C6.21628018,9.632 5.9848571,9.62017949 5.7764748,9.73964103 C5.63314803,9.82179487 5.2834538,10.1365128 5.43941215,10.0842051 L5.43941215,10.0842051 Z"></path>\n                <path clip-rule="evenodd" fill-rule="evenodd" fill="#d3d3d3" stroke="none" d="M5.07072525,11.0275897 C4.98694357,10.9529744 5.32708448,10.7136923 5.49394378,10.6083333 C5.89382986,10.3557949 6.36406443,10.2314359 6.82328308,10.1331538 C7.08078959,10.0780256 7.35603448,10.001359 7.61003568,10.0716667 C7.76458742,10.1144359 7.88981296,10.2379231 8.00612428,10.3511795 C8.0642319,10.4077436 8.07298238,10.5396154 8.15262312,10.5468462 C8.27958652,10.5583846 8.33515667,10.4914872 8.40221337,10.5635128 C8.43744348,10.6014103 8.50464428,10.7650256 8.45647199,10.7479744 C8.40979192,10.7315641 8.27850717,10.7625897 8.20708283,10.8769231 C8.11068948,11.0310769 8.07290274,11.2909231 8.02427029,11.3604103 C7.87478851,11.5739744 7.91039466,11.4657436 7.88305269,11.5128974 C7.86878256,11.5375128 8.10691862,10.9194359 8.06038339,10.9101026 C7.46914882,10.7915897 7.01867443,11.012641 6.51400837,10.9044615 C6.03164817,10.8011282 5.07072525,10.7451538 5.07072525,11.0274359 L5.07072525,11.0275897 Z"></path>\n                <path clip-rule="evenodd" fill-rule="evenodd" fill="#d3d3d3" stroke="none" d="M2.14071523,12.0575641 C2.18250751,11.3385385 1.26346871,10.6084872 0.960561561,10.4402821 C0.781752579,10.3419487 0.521061787,10.2001026 0.362040362,10.3296154 C0.217337353,10.4474359 0.323563507,10.7089744 0.331346878,10.8988205 C0.346826516,11.2764103 0.362435068,11.6652051 0.484814299,12.0214615 C0.614193959,12.3981026 0.923101833,12.6854103 1.0833355,13.0492308 C1.21435919,13.3467179 1.26059851,13.6641538 1.30438622,13.9877179 C1.32488554,14.1391795 1.29954075,14.3007949 1.35957586,14.4406667 C1.44911362,14.6492821 1.65155767,14.8267436 1.86601686,14.8833846 C2.08856726,14.9421795 2.40734452,14.9334103 2.54127152,14.7410769 C2.5893557,14.6720256 2.58818502,14.5168974 2.51057803,14.4881026 C2.39821801,14.4464103 2.36449529,14.7072308 2.24968441,14.7410769 C2.07414681,14.7928718 1.86771912,14.7295385 1.71254993,14.6304103 C1.59168233,14.5531795 1.50748604,14.4173333 1.45165631,14.2825385 C1.32982534,13.9884359 1.4158431,13.6357436 1.31353563,13.3338462 C1.14809364,12.845641 0.932666855,12.6503333 0.691768846,12.1966923 C0.522097579,11.8771538 0.265527059,11.0378205 0.509150928,10.9936923 C0.621338733,10.9734359 0.496675136,11.3281282 0.61031733,11.3361282 C0.654657036,11.3392051 0.653296222,11.2535641 0.658663824,11.2081026 C0.674969706,11.0700256 0.590159208,10.9323333 0.606594253,10.7942821 C0.613540181,10.7359231 0.613771629,10.6449231 0.668974457,10.6300256 C0.915149231,10.563641 1.085205,10.9373846 1.25982204,11.1281026 C1.54384154,11.4383077 2.12014921,12.4113846 2.14071523,12.0575641 L2.14071523,12.0575641 Z"></path>\n                <path clip-rule="evenodd" fill-rule="evenodd" fill="#d3d3d3" stroke="none" d="M2.58731174,15.0889487 C2.58731174,15.0889487 2.91605147,16.2481795 3.24721941,16.733359 C3.76386179,17.4902821 4.51487111,18.0564103 5.24229041,18.5991538 C5.62823511,18.8871026 6.03988747,19.1522308 6.48537253,19.3264872 C7.03784131,19.5426154 7.6315805,19.6448718 8.21954916,19.7059744 C8.84051683,19.7705128 9.44597973,19.6859744 10.0611535,19.6664359 C10.3733469,19.6564359 10.6522218,19.393 10.8898741,19.1841795 C11.4391275,18.7015641 11.8662012,18.0854359 12.3017714,17.4923333 C12.6202338,17.0586923 12.9620999,16.6294103 13.1765327,16.1325128 C13.410427,15.5905385 13.521099,14.9956667 13.6062395,14.4090513 C13.7561879,13.3758718 13.7443591,11.2783077 13.7443591,11.2783077 C13.7443591,11.2783077 13.5461252,12.859 13.452772,13.6500769 C13.3887481,14.1926154 13.4065496,14.7509487 13.2686116,15.2786923 C13.1351657,15.7892308 12.9186001,16.2798718 12.6547444,16.733359 C12.3158648,17.3158205 11.8601338,17.8184615 11.4270076,18.330359 C11.2035184,18.5944872 10.9833492,18.8662564 10.7210614,19.0893077 C10.4956336,19.2810256 10.2602684,19.5216667 9.96907204,19.5478462 C9.3014691,19.6079231 8.86704624,19.5852051 8.31162937,19.5319487 C7.85775294,19.4884872 7.39952231,19.4392051 6.96112029,19.3105897 C6.63034631,19.2135385 6.31241172,19.0675128 6.00962502,18.8994615 C5.61365986,18.6797179 5.24191462,18.4123846 4.88931633,18.1246923 C4.50622018,17.8121282 4.14571186,17.467641 3.81504713,17.0969231 C3.61284995,16.8702564 3.42652986,16.6269744 3.26256615,16.3695897 C3.00381878,15.9634359 2.58731174,15.0888462 2.58731174,15.0888462 L2.58731174,15.0889487 Z"></path>\n            </svg>\n        </div>\n        <div title="Robot9000 Enabled" class="r9k">\n            <svg width="26px" height="22px" version="1.1" viewBox="0 0 26 22" x="0px" y="0px">\n                <path clip-rule="evenodd" fill-rule="evenodd" fill="#d3d3d3" stroke="none" d="M2.98763607,10.2134233 C2.98763607,9.87789913 2.97951867,9.53696837 2.96328363,9.19062081 C2.94704859,8.84427325 2.93351959,8.3951105 2.92269623,7.84311909 L3.97796866,7.84311909 L3.97796866,9.25556065 L4.01043858,9.25556065 C4.08620211,9.04991679 4.1944341,8.85239341 4.33513779,8.66298459 C4.47584149,8.47357577 4.64630687,8.30311039 4.84653905,8.15158334 C5.04677123,8.00005628 5.27947001,7.87829529 5.54464235,7.78629672 C5.8098147,7.69429815 6.11015847,7.64829956 6.44568266,7.64829956 C6.74873677,7.64829956 7.01390514,7.68076916 7.24119573,7.74570932 L7.03014124,8.80098176 C6.88943755,8.74686495 6.68379677,8.71980695 6.41321274,8.71980695 C6.00192502,8.71980695 5.65017106,8.79827515 5.35794031,8.95521388 C5.06570956,9.11215262 4.82218758,9.3123818 4.62736708,9.55590742 C4.43254658,9.79943305 4.2891392,10.0618956 4.19714063,10.343303 C4.10514206,10.6247104 4.05914347,10.8952904 4.05914347,11.155051 L4.05914347,15.4410806 L2.98763607,15.4410806 L2.98763607,10.2134233 Z M14.1735239,7.30736539 C14.1735239,6.93937111 14.1112905,6.60385195 13.9868218,6.30079784 C13.8623532,5.99774372 13.6864762,5.73798695 13.4591856,5.52151973 C13.231895,5.30505251 12.9613151,5.13458713 12.6474376,5.01011847 C12.3335601,4.88564982 11.9872178,4.82341643 11.6084001,4.82341643 C11.2295825,4.82341643 10.8832401,4.88564982 10.5693626,5.01011847 C10.2554852,5.13458713 9.98490519,5.30505251 9.75761461,5.52151973 C9.53032403,5.73798695 9.35444705,5.99774372 9.22997839,6.30079784 C9.10550974,6.60385195 9.04327635,6.93937111 9.04327635,7.30736539 C9.04327635,7.67535967 9.10550974,8.01087883 9.22997839,8.31393294 C9.35444705,8.61698705 9.53032403,8.87944962 9.75761461,9.10132853 C9.98490519,9.32320743 10.2554852,9.49367281 10.5693626,9.61272978 C10.8832401,9.73178676 11.2295825,9.79131435 11.6084001,9.79131435 C11.9872178,9.79131435 12.3335601,9.73178676 12.6474376,9.61272978 C12.9613151,9.49367281 13.231895,9.32320743 13.4591856,9.10132853 C13.6864762,8.87944962 13.8623532,8.61698705 13.9868218,8.31393294 C14.1112905,8.01087883 14.1735239,7.67535967 14.1735239,7.30736539 L14.1735239,7.30736539 Z M13.0046067,10.5056526 L12.9721368,10.4731827 C12.7881397,10.603063 12.5419119,10.7004718 12.2334461,10.765412 C11.9249803,10.8303521 11.6408713,10.8628217 11.3811107,10.8628217 C10.8832361,10.8628217 10.4205443,10.7735304 9.99302154,10.5949449 C9.56549877,10.4163594 9.19480422,10.1701317 8.88092674,9.85625419 C8.56704927,9.54237672 8.3208215,9.16897636 8.14223604,8.73604192 C7.96365058,8.30310747 7.87435919,7.82688672 7.87435919,7.30736539 C7.87435919,6.77702069 7.96635638,6.29538835 8.15035352,5.8624539 C8.33435066,5.42951946 8.59410743,5.0561191 8.92963162,4.74224162 C9.26515582,4.42836415 9.66020257,4.18484218 10.1147837,4.0116684 C10.5693649,3.83849462 11.0672321,3.75190903 11.6084001,3.75190903 C12.1495682,3.75190903 12.6474353,3.83849462 13.1020165,4.0116684 C13.5565976,4.18484218 13.9516444,4.42836415 14.2871686,4.74224162 C14.6226928,5.0561191 14.8824496,5.42951946 15.0664467,5.8624539 C15.2504438,6.29538835 15.342441,6.77702069 15.342441,7.30736539 C15.342441,7.9459437 15.247738,8.50333843 15.0583292,8.97956632 C14.8689204,9.45579421 14.6335158,9.92660336 14.3521084,10.3920079 L11.251231,15.4410806 L9.87125933,15.4410806 L13.0046067,10.5056526 Z M18.3621437,11.2686958 L21.95007,7.84311909 L23.5573311,7.84311909 L19.7745853,11.3174006 L23.9632051,15.4410806 L22.3072391,15.4410806 L18.3621437,11.4472803 L18.3621437,15.4410806 L17.2906363,15.4410806 L17.2906363,3.16745045 L18.3621437,3.16745045 L18.3621437,11.2686958 Z"></path>\n            </svg>\n        </div>\n        <div title="Subscribers-Only Mode Enabled" class="subs-only">\n            <svg width="26px" height="22px" version="1.1" viewBox="0 0 26 22" x="0px" y="0px">\n                <path clip-rule="evenodd" fill-rule="evenodd" fill="#d3d3d3" stroke="none" d="M9.27481618,13.6268381 C9.27481619,15.0585936 21.1132816,15.0078128 21.1132816,13.6268381 C21.1132816,12.2458633 16.9215274,13.7446739 16.6289064,11.3913143 C16.3362854,9.03795478 17.8113514,9.06502765 17.8113514,7.74195776 C17.8113514,6.41888788 16.1631438,5.44732696 15.194049,5.3492647 C14.2249543,5.25120244 12.5834099,6.17624082 12.5834099,7.74195772 C12.5834099,9.30767461 13.8025847,9.44785699 13.6895682,11.3913143 C13.5765516,13.3347717 9.27481616,12.1950825 9.27481618,13.6268381 Z"></path>\n                <path clip-rule="evenodd" fill-rule="evenodd" fill="#d3d3d3" stroke="none" d="M9.05269623,4.02031837 C9.41269803,4.02031837 9.78602763,4.06698457 10.1726962,4.16031837 C10.5593648,4.25365217 10.8993614,4.41698387 11.1926962,4.65031837 L10.2326962,5.82031837 C10.0726954,5.68031767 9.88936393,5.57865202 9.68269623,5.51531837 C9.47602853,5.45198472 9.26603063,5.41365177 9.05269623,5.40031837 L9.05269623,6.99031837 L10.0126962,7.27031837 C10.4526984,7.40365237 10.8043616,7.62198352 11.0676962,7.92531837 C11.3310309,8.22865322 11.4626962,8.61364937 11.4626962,9.08031837 C11.4626962,9.43365347 11.3993635,9.74365037 11.2726962,10.0103184 C11.1460289,10.2769864 10.9726973,10.5036508 10.7526962,10.6903184 C10.5326951,10.876986 10.276031,11.0236512 9.98269623,11.1303184 C9.68936143,11.2369856 9.37936453,11.3069849 9.05269623,11.3403184 L9.05269623,12.0403184 L8.39269623,12.0403184 L8.39269623,11.3403184 C7.95269403,11.3403184 7.51436508,11.280319 7.07769623,11.1603184 C6.64102738,11.0403178 6.25603123,10.8303199 5.92269623,10.5303184 L6.98269623,9.34031837 C7.15603043,9.55365277 7.36602833,9.70531792 7.61269623,9.79531837 C7.85936413,9.88531882 8.11936153,9.94031827 8.39269623,9.96031837 L8.39269623,8.27031837 L7.66269623,8.05031837 C7.15602703,7.89031757 6.77103088,7.66531982 6.50769623,7.37531837 C6.24436158,7.08531692 6.11269623,6.68698757 6.11269623,6.18031837 C6.11269623,5.86698347 6.17602893,5.58365297 6.30269623,5.33031837 C6.42936353,5.07698377 6.59769518,4.86031927 6.80769623,4.68031837 C7.01769728,4.50031747 7.26102818,4.35365227 7.53769623,4.24031837 C7.81436428,4.12698447 8.09936143,4.05365187 8.39269623,4.02031837 L8.39269623,3.32031837 L9.05269623,3.32031837 L9.05269623,4.02031837 Z M8.39269623,5.43031837 C8.20602863,5.47031857 8.03936363,5.54031787 7.89269623,5.64031837 C7.74602883,5.74031887 7.67269623,5.89698397 7.67269623,6.11031837 C7.67269623,6.26365247 7.70269593,6.38365127 7.76269623,6.47031837 C7.82269653,6.55698547 7.89269583,6.62531812 7.97269623,6.67531837 C8.05269663,6.72531862 8.13269583,6.76031827 8.21269623,6.78031837 C8.29269663,6.80031847 8.35269603,6.81698497 8.39269623,6.83031837 L8.39269623,5.43031837 Z M9.05269623,9.94031837 C9.15269673,9.92031827 9.25436238,9.89198522 9.35769623,9.85531837 C9.46103008,9.81865152 9.55269583,9.77031867 9.63269623,9.71031837 C9.71269663,9.65031807 9.77769598,9.57865212 9.82769623,9.49531837 C9.87769648,9.41198462 9.90269623,9.31365227 9.90269623,9.20031837 C9.90269623,9.09365117 9.88436308,9.00365207 9.84769623,8.93031837 C9.81102938,8.85698467 9.76269653,8.79531862 9.70269623,8.74531837 C9.64269593,8.69531812 9.57269663,8.65198522 9.49269623,8.61531837 C9.41269583,8.57865152 9.32936333,8.54365187 9.24269623,8.51031837 L9.05269623,8.44031837 L9.05269623,9.94031837 Z"></path>\n            </svg>\n        </div>\n        <div class="slow">\n            <div title="0 seconds" class="slow-time">0:00</div>\n            <svg width="26px" height="22px" version="1.1" viewBox="0 0 26 22" x="0px" y="0px" title="Slow Mode Enabled">\n                <path clip-rule="evenodd" fill-rule="evenodd" fill="#d3d3d3" stroke="none" d="M17.1477712,15.2881724 C18.1841482,15.2990242 18.3714659,13.1141401 18.984666,13.0696235 C20.7929233,12.9383492 21.27411,12.5312339 22.0061575,11.9392359 C23.1373692,11.0244387 19.9060764,12.1089751 19.4762501,10.2570139 C19.0464238,8.40505269 20.0193482,10.024402 20.0193482,10.024402 C20.0193482,10.024402 21.8187185,4.26759557 15.5617966,4.00868857 C9.30487476,3.74978158 10.4161868,9.36314385 10.4161868,9.36314385 C10.4161868,9.36314385 11.2540951,8.34295601 11.2540951,9.63941257 C11.2540951,10.1964047 9.76901904,10.6570445 8.53287358,9.63941257 C7.29672813,8.62178061 8.11686902,7.37127839 7.67827778,6.69569265 C7.23968654,6.02010691 3.76038497,5.06926224 3.24213373,5.95824564 C2.72388249,6.84722904 5.76831809,8.74663617 5.96217543,9.63941257 C6.15603277,10.532189 7.03943787,12.1288651 7.49294803,12.5678492 C7.94645819,13.0068332 5.92939735,14.4797566 6.69153143,14.5326896 C7.45366552,14.5856225 9.47706304,12.9278239 10.0844223,12.7478364 C10.6917815,12.5678489 13.1392341,12.9471552 14.5871877,13.023578 C15.3550569,13.064106 16.1113943,15.2773206 17.1477712,15.2881724 Z M4.84344721,6.76429629 C5.04601701,6.76429629 5.21023228,6.60974074 5.21023228,6.41908681 C5.21023228,6.22843288 5.04601701,6.07387733 4.84344721,6.07387733 C4.6408774,6.07387733 4.47666213,6.22843288 4.47666213,6.41908681 C4.47666213,6.60974074 4.6408774,6.76429629 4.84344721,6.76429629 Z M11.7028228,7.36314163 C11.7326095,6.35178988 13.3449525,4.92929352 15.0963754,4.98088076 C16.8477983,5.032468 18.7948736,6.68625403 18.7749376,7.36314154 C18.7550016,8.04002904 16.952545,5.71526454 15.0963754,5.66059204 C13.2402058,5.60591954 11.673036,8.37449337 11.7028228,7.36314163 Z"></path>\n            </svg>\n        </div>\n    </div>\n')}},{}],20:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),c=a(e("@babel/runtime/helpers/toConsumableArray")),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),m=e("jquery"),y=e("../../settings"),i=e("../../watcher"),b=e("../../utils/twitch"),_=e("../../utils/keycodes"),l=e("../emotes"),k='div[data-a-target="autocomplete-balloon"]';function u(e,t){return e&&e.toLowerCase().startsWith(t)}var s=function(){function e(){var r=this;(0,n.default)(this,e),y.add({id:"tabCompletionTooltip",name:"Completion Tooltip",defaultValue:!0,description:"Shows a tooltip with suggested names when using @ completion"}),y.add({id:"tabCompletionEmotePriority",name:"Tab Completion Emote Priority",description:"Prioritize emotes over usernames when using tab completion",default:!1}),i.on("chat.message",function(e,t){return r.storeUser(t)}),i.on("load.chat",function(){return r.resetChannelData()}),y.on("changed.tabCompletionTooltip",function(){return r.loadTabCompletionTooltip()}),this.load()}return(0,o.default)(e,[{key:"loadTabCompletionTooltip",value:function(){m("body").toggleClass("bttv-hide-tab-completion-tooltip",!y.get("tabCompletionTooltip"))}},{key:"load",value:function(){this.tabTries=-1,this.suggestions=null,this.textSplit=["","",""],this.userList=new Set,this.messageHistory=[],this.historyPos=-1,this.loadTabCompletionTooltip()}},{key:"storeUser",value:function(e){var t=e.user,r=t.userDisplayName,a=t.userLogin,n=r&&r.toLowerCase()===a?r:a;this.userList.add(n)}},{key:"onSendMessage",value:function(e){var t=e.message;0!==t.trim().length&&(this.messageHistory.unshift(t),this.historyPos=-1)}},{key:"resetChannelData",value:function(){var t=this;this.userList=new Set,m(".chat-input textarea").off("keydown.tabComplete focus.tabComplete").on("keydown.tabComplete",function(e){return t.onKeydown(e)}).on("focus.tabComplete",function(){return t.onFocus()})}},{key:"onFocus",value:function(){this.tabTries=-1}},{key:"onKeydown",value:function(e,t){var r=!(1<arguments.length&&void 0!==t)||t,a=e.keyCode||e.which;if(!e.ctrlKey){var n=m(e.target);if(a===_.Tab){if(e.preventDefault(),-1===this.tabTries){var o=n[0].selectionStart,i=n.val(),s=(/[\:\(\)\w]+$/.exec(i.substr(0,o))||{index:o}).index,c=o+(/^\w+/.exec(i.substr(o))||[""])[0].length;if(this.textSplit=[i.substring(0,s),i.substring(s,c),i.substring(c+1)],""===this.textSplit[1])return;var l="@"!==this.textSplit[0].slice(-1);this.suggestions=this.getSuggestions(this.textSplit[1],r,l)}if(y.get("tabCompletionTooltip")&&"@"===this.textSplit[0].slice(-1))return;if(0<this.suggestions.length){if(this.tabTries+=e.shiftKey?-1:1,this.tabTries>=this.suggestions.length&&(this.tabTries=0),this.tabTries<0&&(this.tabTries=this.suggestions.length-1),!this.suggestions[this.tabTries])return;var u=0;""===this.textSplit[2].trim()&&(this.textSplit[2]=" ",u=1),e.stopImmediatePropagation();var d=this.textSplit[0].length+this.suggestions[this.tabTries].length+u;b.setInputValue(n,this.textSplit[0]+this.suggestions[this.tabTries]+this.textSplit[2]),n[0].setSelectionRange(d,d)}}else a===_.Esc&&0<=this.tabTries?b.setInputValue(n,this.textSplit.join("")):a!==_.Shift&&(this.tabTries=-1);if(a===_.UpArrow){if(0<m(k).length)return;if(0<n[0].selectionStart)return;if(this.historyPos+1===this.messageHistory.length)return;var h=n.val().trim();this.historyPos<0&&0<h.length&&(this.messageHistory.unshift(h),this.historyPos=0);var p=this.messageHistory[++this.historyPos];b.setInputValue(n,p),n[0].setSelectionRange(0,0)}else if(a===_.DownArrow){if(0<m(k).length)return;if(n[0].selectionStart<n.val().length)return;if(0<this.historyPos){var f=this.messageHistory[--this.historyPos];b.setInputValue(n,f),n[0].setSelectionRange(f.length,f.length)}else{var g=n.val().trim();this.historyPos<0&&0<g.length&&this.messageHistory.unshift(g),this.historyPos=-1,b.setInputValue(n,"")}}else 0<=this.historyPos&&(this.messageHistory[this.historyPos]=n.val())}}},{key:"getSuggestions",value:function(r,e,t){var a=!(1<arguments.length&&void 0!==e)||e,n=!(2<arguments.length&&void 0!==t)||t,o=[],i=[];if(r=r.toLowerCase(),n){var s=new Set;l.getEmotes().forEach(function(e){var t=e.code;u(t,r)&&s.add(t)}),this.getTwitchEmotes().forEach(function(e){u(e,r)&&s.add(e)}),(i=Array.from(s)).sort()}return a&&(o=Array.from(this.userList).filter(function(e){return u(e,r)})).sort(),!0===y.get("tabCompletionEmotePriority")?[].concat((0,c.default)(i),(0,c.default)(o)):[].concat((0,c.default)(o),(0,c.default)(i))}},{key:"getTwitchEmotes",value:function(){try{return Object.keys(b.getCurrentEmotes())}catch(e){return[]}}}]),e}();t.exports=new s},{"../../settings":55,"../../utils/keycodes":66,"../../utils/twitch":71,"../../watcher":72,"../emotes":35,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81,"@babel/runtime/helpers/toConsumableArray":86,jquery:93}],21:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),i=e("jquery"),s=e("../chat"),c=e("../../utils/colors"),l=e("../../settings"),u=e("../../watcher"),d="bttvGIFEmotes";var h=function(){function e(){var t=this;(0,n.default)(this,e),u.on("load.clips",function(){return t.load()}),u.on("clips.message",function(e){return t.parseMessage(e)})}return(0,o.default)(e,[{key:"load",value:function(){!1===l.get(d)&&l.set(d,!0)}},{key:"parseMessage",value:function(e){var t=e.find("a span.tw-strong"),r=c.getHex(function(e){function t(e){return parseInt((e||"0").trim(),10)}var r=((e||"").split(")")[0].split("rgb(")[1]||"").split(",");return{r:t(r[0]),g:t(r[1]),b:t(r[2])}}(t.css("color")));t.attr("style","color: ".concat(s.calculateColor(r)));var a={name:t.text()};s.messageReplacer(e.find('span[data-a-target="chat-message-text"]'),a),function(e){0<i(".clips-chat .clips-chat__content button.tw-button--small").length||e.find("img").on("load",function(){var e=i(".clips-chat .simplebar-scroll-content");e.scrollTop(e[0].scrollHeight)})}(e)}}]),e}();t.exports=new h},{"../../settings":55,"../../utils/colors":60,"../../watcher":72,"../chat":4,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81,jquery:93}],22:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),i=e("jquery"),s=e("../../settings"),c=e("../../watcher"),l=e("../chat");var u=function(){function e(){var r=this;(0,n.default)(this,e),s.add({id:"disableWhispers",name:"Hide Whispers",defaultValue:!1,description:"Disables the Twitch whisper feature and hides any whispers you receive"}),s.add({id:"hideConversations",name:"Hide Whispers When Inactive",defaultValue:!1,description:"Only show whispers on mouseover or when there's a new message"}),s.on("changed.disableWhispers",function(){return r.toggleHide()}),s.on("changed.hideConversations",function(){return r.toggleAutoHide()}),c.on("load",function(){r.toggleHide(),r.toggleAutoHide()}),c.on("conversation.message",function(e,t){return r.parseMessage(e,t)})}return(0,o.default)(e,[{key:"toggleHide",value:function(){i("body").toggleClass("bttv-hide-conversations",s.get("disableWhispers"))}},{key:"toggleAutoHide",value:function(){i("body").toggleClass("bttv-auto-hide-conversations",s.get("hideConversations"))}},{key:"parseMessage",value:function(e,t){var r=e.find(".thread-message__message--user-name");if(t.from){var a=t.from,n={id:a.id,name:a.login,displayName:a.displayName,color:a.chatColor};r.css("color",l.calculateColor(n.color));var o=e.find('span[data-a-target="chat-message-text"]');l.messageReplacer(o,n),function(t){t.find("img.bttv").on("load",function(){var e=t.closest(".simplebar-scroll-content");e.scrollTop(e[0].scrollHeight)})}(e)}}}]),e}();t.exports=new u},{"../../settings":55,"../../watcher":72,"../chat":4,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81,jquery:93}],23:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),i=e("../../settings"),s=e("../../watcher"),c=e("jquery"),l=function(){function t(){var e=this;(0,n.default)(this,t),i.add({id:"showDirectoryLiveTab",name:"Default to Live Channels",defaultValue:!1,description:'BetterTTV can click on "Channels" for you in the Following Overview automatically'}),s.on("load.directory.following",function(){return e.load()})}return(0,o.default)(t,[{key:"load",value:function(e){var t=this,r=0<arguments.length&&void 0!==e?e:0;if(!(!1===i.get("showDirectoryLiveTab")||10<r)){var a=c('a[href="/directory/following/live"]');if(!a.length)return setTimeout(function(){return t.load(r+1)},250);a[0].click()}}}]),t}();t.exports=new l},{"../../settings":55,"../../watcher":72,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81,jquery:93}],24:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),i=e("../../settings"),s=e("../../watcher"),c=e("../../utils/twitch"),l=function(){function t(){var e=this;(0,n.default)(this,t),i.add({id:"disableFPVideo",name:"Disable Homepage Autoplay",defaultValue:!1,description:"Disables video player autoplay on the homepage"}),s.on("load.homepage",function(){return e.load()})}return(0,o.default)(t,[{key:"load",value:function(){if(!1!==i.get("disableFPVideo")){var t=c.getCurrentPlayer();if(t){var e=function e(){setTimeout(function(){t.pause()},0),t.emitter?t.emitter.removeListener("Playing",e):t.removeEventListener("play",e)};t.emitter?(t.pause(),t.emitter.on("Playing",e)):t.addEventListener("play",e)}}}}]),t}();t.exports=new l},{"../../settings":55,"../../utils/twitch":71,"../../watcher":72,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81}],25:[function(e,t,r){"use strict";var a,n,o=e("@babel/runtime/helpers/interopRequireDefault"),i=o(e("@babel/runtime/helpers/classCallCheck")),s=o(e("@babel/runtime/helpers/createClass")),c=e("../../settings"),l=e("../../watcher"),u=e("../../utils/twitch");function d(){var e;return c.get("disableHostMode")?null:(e=a).call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))}function h(){var e;return c.get("disableHostMode")?null:(e=n).call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))}var p=function(){function t(){var e=this;(0,i.default)(this,t),c.add({id:"disableHostMode",name:"Disable Host Mode",defaultValue:!1,description:"Disables hosted channels on Twitch"}),c.on("changed.disableHostMode",function(){return e.load()}),l.on("load.chat",function(){return e.load()})}return(0,s.default)(t,[{key:"load",value:function(){if(c.get("disableHostMode")){var e=u.getChannelHostingContext();e&&(e._bttvPatched||(e._bttvPatched=!0,e.handleStreamChatRoomHostTargetChange&&e.handleStreamChatRoomHostTargetChange!==d&&(a=e.handleStreamChatRoomHostTargetChange,e.handleStreamChatRoomHostTargetChange=d),e.fetchPubsubHostedChannel&&e.fetchPubsubHostedChannel!==h&&(n=e.fetchPubsubHostedChannel,e.fetchPubsubHostedChannel=h),e.setState({videoPlayerSource:e.props.match.params.channelLogin,hostedChannel:null})))}}}]),t}();t.exports=new p},{"../../settings":55,"../../utils/twitch":71,"../../watcher":72,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81}],26:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),i=e("../../settings"),s=e("../../watcher"),c=function(){function e(){var t=this;(0,n.default)(this,e),i.add({id:"disableLocalizedNames",name:"Disable Localized Names",defaultValue:!1,description:"Show usernames instead of localized names in chat"}),s.on("chat.message",function(e){return t.delocalizeName(e)})}return(0,o.default)(e,[{key:"delocalizeName",value:function(e){if(!1!==i.get("disableLocalizedNames")){var t=e.find(".chat-author__display-name"),r=e.find(".chat-author__intl-login");r.length&&(t.text(r.text().replace(/[\(\)]/g,"").trim()),r.remove())}}}]),e}();t.exports=new c},{"../../settings":55,"../../watcher":72,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81}],27:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),i=e("jquery"),s=e("../../settings"),c=e("../../watcher"),l=function(){function t(){var e=this;(0,n.default)(this,t),s.add({id:"disableUsernameColors",name:"Disable Name Colors",defaultValue:!1,description:"Disables colors in chat (useful for those who may suffer from color blindness)"}),s.on("changed.disableUsernameColors",function(){return e.load()}),c.on("load.chat",function(){return e.load()})}return(0,o.default)(t,[{key:"load",value:function(){i(".chat-list__lines").toggleClass("bttv-disable-name-colors",s.get("disableUsernameColors"))}}]),t}();t.exports=new l},{"../../settings":55,"../../watcher":72,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81,jquery:93}],28:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),s=e("jquery"),i=e("../../watcher"),c=e("../../utils/twitch");var l=function(){function t(){var e=this;(0,n.default)(this,t),i.on("load.chat",function(){return e.load()})}return(0,o.default)(t,[{key:"load",value:function(){s(".chat-list").off("dblclick.mention").on("dblclick.mention",'.chat-line__message span.chat-author__display-name, .chat-line__message span[data-a-target="chat-message-mention"]',function(e){if(!e.shiftKey&&!e.ctrlKey){s('button[data-test-selector="close-viewer-card"]').click(),document.selection&&document.selection.empty?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges();var t=e.target.innerText?e.target.innerText.replace("@",""):"",r=s(e.target),a=c.getChatMessageObject(r.closest(".chat-line__message")[0]);a&&"chat-message-mention"!==r.attr("data-a-target")&&(t=a.user.userLogin);var n=s(".chat-input textarea");if(n.length){var o=n.val().trim(),i=o?"".concat(o," @").concat(t," "):"@".concat(t,", ");c.setInputValue(n,i,!0)}}})}}]),t}();t.exports=new l},{"../../utils/twitch":71,"../../watcher":72,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81,jquery:93}],29:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),i=e("jquery"),s=e("../../utils/debug"),c=e("../../settings"),l=e("../../watcher"),u=e("../emotes"),d=function(){function t(){var e=this;(0,n.default)(this,t),c.add({id:"clickTwitchEmotes",name:"Emote Menu",defaultValue:!1,description:"Get a more advanced emote menu for Twitch. (Made by Ryan Chatham)"}),c.on("changed.clickTwitchEmotes",function(){return e.load()}),l.on("load.chat",function(){return e.load()})}return(0,o.default)(t,[{key:"load",value:function(){if(window.emoteMenu)!0===c.get("clickTwitchEmotes")?i("#emote-menu-button").show():i("#emote-menu-button").hide();else if(!1!==c.get("clickTwitchEmotes")){s.log("Injecting Twitch Chat Emotes Script"),e("twitch-chat-emotes/script.min"),s.log("Hooking into Twitch Chat Emotes Script");try{window.emoteMenu.registerEmoteGetter("BetterTTV",function(){return u.getEmotes(["bttv-emoji"]).map(function(e){var t=e.code,r=e.images,a=e.provider;return{text:t,channel:a.displayName,badge:a.badge,url:r["2x"]}})})}catch(e){}}}}]),t}();t.exports=new d},{"../../settings":55,"../../utils/debug":61,"../../watcher":72,"../emotes":35,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81,jquery:93,"twitch-chat-emotes/script.min":109}],30:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/toConsumableArray")),o=a(e("@babel/runtime/helpers/classCallCheck")),i=a(e("@babel/runtime/helpers/createClass"));t.exports=function(){function e(){if((0,o.default)(this,e),this.emotes=new Map,void 0===this.provider)throw new TypeError('Must set "provider" attribute')}return(0,i.default)(e,[{key:"getEmotes",value:function(){return(0,n.default)(this.emotes.values())}},{key:"getEligibleEmote",value:function(e){return this.emotes.get(e)}}]),e}()},{"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81,"@babel/runtime/helpers/toConsumableArray":86}],31:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),i=a(e("@babel/runtime/helpers/possibleConstructorReturn")),s=a(e("@babel/runtime/helpers/getPrototypeOf")),c=a(e("@babel/runtime/helpers/inherits")),l=e("../../watcher"),u=e("../../utils/cdn"),d=e("../../utils/twitch"),h=e("./abstract-emotes"),p=e("./emote"),f={id:"bttv-channel",displayName:"BetterTTV Channel Emotes",badge:u.url("tags/developer.png")},g=function(e){function r(){var t;return(0,n.default)(this,r),t=(0,i.default)(this,(0,s.default)(r).call(this)),l.on("channel.updated",function(e){return t.updateChannelEmotes(e)}),t}return(0,c.default)(r,e),(0,o.default)(r,[{key:"updateChannelEmotes",value:function(e){var o=this,t=e.channelEmotes,r=e.sharedEmotes;this.emotes.clear();var a=t.concat(r),i=d.getCurrentChannel();a.forEach(function(e){var t=e.id,r=e.user,a=e.code,n=e.imageType;return o.emotes.set(a,new p({id:t,provider:o.provider,channel:r||i,code:a,images:{"1x":u.emoteUrl(t,"1x"),"2x":u.emoteUrl(t,"2x"),"4x":u.emoteUrl(t,"3x")},imageType:n}))}),setTimeout(function(){return l.emit("emotes.updated")},0)}},{key:"provider",get:function(){return f}}]),r}(h);t.exports=new g},{"../../utils/cdn":59,"../../utils/twitch":71,"../../watcher":72,"./abstract-emotes":30,"./emote":33,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/getPrototypeOf":79,"@babel/runtime/helpers/inherits":80,"@babel/runtime/helpers/interopRequireDefault":81,"@babel/runtime/helpers/possibleConstructorReturn":84}],32:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),i=a(e("@babel/runtime/helpers/possibleConstructorReturn")),s=a(e("@babel/runtime/helpers/getPrototypeOf")),c=a(e("@babel/runtime/helpers/inherits")),l=e("emojilib"),u=e("twemoji"),d=e("../../utils/emoji-blacklist.json"),h=e("../../utils/cdn"),p=e("./abstract-emotes"),f=e("./emote"),g={id:"bttv-emoji",displayName:"BetterTTV Emojis",badge:h.url("tags/developer.png")};var m=function(e){function t(){var e;return(0,n.default)(this,t),(e=(0,i.default)(this,(0,s.default)(t).call(this))).loadEmojis(),e}return(0,c.default)(t,e),(0,o.default)(t,[{key:"loadEmojis",value:function(){var i=this;Object.keys(l.lib).filter(function(e){var t=l.lib[e];if(!t||!t.char)return!1;var r=function(e){var t=0;return u.parse(e.char,function(e){t+=e.split("-").length}),t}(t);return-1===d.indexOf(t.char)&&"_custom"!==t.category&&1===r}).forEach(function(e,t){var r,a=l.lib[e];if(u.parse(a.char,{callback:function(e,t){switch(e){case"a9":case"ae":case"2122":return!1}return r="".concat(t.base,t.size,"/",e,t.ext),!1}}),r){var n=":".concat(e,":"),o=new f({id:t,provider:i.provider,code:n,images:{"1x":r}});i.emotes.set(a.char,o),i.emotes.set(n,o)}})}},{key:"onSendMessage",value:function(e){e.message=e.message.split(" ").map(function(e){if(":"!==e.charAt(0)||":"!==e.charAt(e.length-1))return e;var t=l.ordered[l.ordered.indexOf(e.replace(/:/g,""))];return t&&l.lib[t]?l.lib[t].char:e}).join(" ")}},{key:"provider",get:function(){return g}}]),t}(p);t.exports=new m},{"../../utils/cdn":59,"../../utils/emoji-blacklist.json":62,"./abstract-emotes":30,"./emote":33,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/getPrototypeOf":79,"@babel/runtime/helpers/inherits":80,"@babel/runtime/helpers/interopRequireDefault":81,"@babel/runtime/helpers/possibleConstructorReturn":84,emojilib:90,twemoji:108}],33:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),d=a(e("@babel/runtime/helpers/classCallCheck")),n=a(e("@babel/runtime/helpers/createClass")),o=e("../../utils/html");t.exports=function(){function u(e){var t=e.id,r=e.provider,a=e.channel,n=e.code,o=e.images,i=e.imageType,s=void 0===i?"png":i,c=e.restrictionCallback,l=void 0===c?null:c;(0,d.default)(this,u),this.id=t,this.provider=r,this.channel=a,this.code=n,this.restrictionCallback=l,this.images=o,this.imageType=s}return(0,n.default)(u,[{key:"isUsable",value:function(e,t){return!this.restrictionCallback||this.restrictionCallback(e,t)}},{key:"toHTML",value:function(){var e=[];this.images["2x"]&&e.push("".concat(o.escape(this.images["2x"])," 2x")),this.images["4x"]&&e.push("".concat(o.escape(this.images["4x"])," 4x"));var t=o.escape(this.provider.id),r="".concat(o.escape(this.provider.id),"-emo-").concat(o.escape(this.id)),a="\n            ".concat(o.escape(this.code),"<br>\n            ").concat(this.channel?"Channel: ".concat(o.escape(this.channel.displayName||this.channel.name),"<br>"):"","\n            ").concat(o.escape(this.provider.displayName),"\n        ");return'\n            <div class="bttv-emote-tooltip-wrapper bttv-emote '.concat(t," ").concat(r,'">\n                <img src="').concat(o.escape(this.images["1x"]),'" srcset="').concat(e.join(", "),'" alt="').concat(o.escape(this.code),'" class="chat-line__message--emote">\n                <div class="bttv-emote-tooltip bttv-emote-tooltip--up bttv-emote-tooltip--align-center">').concat(a,"</div>\n            </div>\n        ")}}]),u}()},{"../../utils/html":65,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81}],34:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),i=a(e("@babel/runtime/helpers/possibleConstructorReturn")),s=a(e("@babel/runtime/helpers/getPrototypeOf")),c=a(e("@babel/runtime/helpers/inherits")),l=e("../../utils/api"),u=e("../../utils/cdn"),d=e("../legacy_subscribers"),h=e("../../watcher"),p=e("./abstract-emotes"),f=e("./emote"),g={id:"bttv",displayName:"BetterTTV Global Emotes",badge:u.url("tags/developer.png")},m=function(e){function t(){var e;return(0,n.default)(this,t),(e=(0,i.default)(this,(0,s.default)(t).call(this))).updateGlobalEmotes(),e}return(0,c.default)(t,e),(0,o.default)(t,[{key:"updateGlobalEmotes",value:function(){var i=this;l.get("cached/emotes/global").then(function(e){return e.forEach(function(e){var t,r=e.id,a=e.code,n=e.imageType,o=e.restrictions;o&&o.emoticonSet&&(t=function(e,t){return"night"===o.emoticonSet&&(!!t&&d.hasSubscription(t.name))}),i.emotes.set(a,new f({id:r,provider:i.provider,channel:void 0,code:a,images:{"1x":u.emoteUrl(r,"1x"),"2x":u.emoteUrl(r,"2x"),"4x":u.emoteUrl(r,"3x")},imageType:n,restrictionCallback:t}))})}).then(function(){return h.emit("emotes.updated")})}},{key:"provider",get:function(){return g}}]),t}(p);t.exports=new m},{"../../utils/api":58,"../../utils/cdn":59,"../../watcher":72,"../legacy_subscribers":49,"./abstract-emotes":30,"./emote":33,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/getPrototypeOf":79,"@babel/runtime/helpers/inherits":80,"@babel/runtime/helpers/interopRequireDefault":81,"@babel/runtime/helpers/possibleConstructorReturn":84}],35:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),l=e("../../utils/twitch"),i=e("./global-emotes"),s=e("./channel-emotes"),c=e("./personal-emotes"),u=e("./emojis"),d=e("../frankerfacez/global-emotes"),h=e("../frankerfacez/channel-emotes"),p=e("../../settings"),f=function(){function e(){(0,n.default)(this,e),this.emoteProviders=[c,i,s,d,h,u],p.add({id:"bttvEmotes",name:"BetterTTV Emotes",defaultValue:!0,description:"BetterTTV adds extra cool emotes for you to use."}),p.add({id:"bttvGIFEmotes",name:"BetterTTV GIF Emotes",defaultValue:!1,description:"We realize not everyone likes GIFs, but some people do."})}return(0,o.default)(e,[{key:"getEmotes",value:function(e){var r=0<arguments.length&&void 0!==e?e:[],a=[],t=!0,n=!1,o=void 0;try{for(var i,s=function(){var e=i.value;if(r.includes(e.provider.id))return"continue";var t=l.getCurrentUser();a=a.concat(e.getEmotes(t).filter(function(e){return!!e.isUsable(null,t)&&(("gif"!==e.imageType||!1!==p.get("bttvGIFEmotes"))&&(!e.provider.id.startsWith("bttv")||!1!==p.get("bttvEmotes")))}))},c=this.emoteProviders[Symbol.iterator]();!(t=(i=c.next()).done);t=!0)s()}catch(e){n=!0,o=e}finally{try{t||null==c.return||c.return()}finally{if(n)throw o}}return a}},{key:"getEligibleEmote",value:function(e,t){for(var r=l.getCurrentChannel(),a=0;a<this.emoteProviders.length;a++){var n=this.emoteProviders[a].getEligibleEmote(e,t);if(n&&n.isUsable(r,t)&&!("gif"===n.imageType&&!1===p.get("bttvGIFEmotes")||n.provider.id.startsWith("bttv")&&!1===p.get("bttvEmotes")))return n}return null}}]),e}();t.exports=new f},{"../../settings":55,"../../utils/twitch":71,"../frankerfacez/channel-emotes":37,"../frankerfacez/global-emotes":38,"./channel-emotes":31,"./emojis":32,"./global-emotes":34,"./personal-emotes":36,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81}],36:[function(e,t,r){"use strict";var a,n=e("@babel/runtime/helpers/interopRequireDefault"),o=n(e("@babel/runtime/helpers/toConsumableArray")),i=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),c=n(e("@babel/runtime/helpers/possibleConstructorReturn")),l=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/inherits")),d=e("../../socket-client"),h=e("../../watcher"),p=e("../../utils/twitch"),f=e("../../utils/cdn"),g=e("./abstract-emotes"),m=e("./emote"),y={id:"bttv-personal",displayName:"BetterTTV Personal Emotes",badge:f.url("tags/developer.png")};function b(e){return e.attr("data-a-target").split("-").pop()}var _=function(e){function t(){var r;return(0,i.default)(this,t),r=(0,c.default)(this,(0,l.default)(t).call(this)),d.on("lookup_user",function(e){return r.updatePersonalEmotes(e)}),h.on("load.chat",function(){return r.joinChannel()}),h.on("conversation.new",function(e){return r.joinConversation(e)}),h.on("conversation.message",function(e,t){return r.broadcastMeConversation(e,t)}),r}return(0,u.default)(t,e),(0,s.default)(t,[{key:"getEmotes",value:function(e){if(!e)return[];var t=this.emotes.get(e.name);return t?(0,o.default)(t.values()):[]}},{key:"getEligibleEmote",value:function(e,t){if(t){var r=this.emotes.get(t.name);if(r)return r.get(e)}}},{key:"joinChannel",value:function(){var e=p.getCurrentChannel();if(e){var t=e.name;t!==a&&d.partChannel(a),a=t,d.joinChannel(t)}}},{key:"joinConversation",value:function(e){if(p.getCurrentUser()){var t=b(e);t&&d.joinChannel(t)}}},{key:"broadcastMeConversation",value:function(e,t){var r=p.getCurrentUser();if(r&&t.from&&t.from.id===r.id){var a=b(e.closest(".whispers-thread"));a&&d.broadcastMe(a)}}},{key:"updatePersonalEmotes",value:function(e){var o=this,t=e.name,r=e.pro,a=e.emotes;if(r){var i=this.emotes.get(t);i||(i=new Map,this.emotes.set(t,i)),a.forEach(function(e){var t=e.id,r=e.channel,a=e.code,n=e.imageType;i.set(a,new m({id:t,provider:o.provider,channel:{name:r},code:a,images:{"1x":f.emoteUrl(t,"1x"),"2x":f.emoteUrl(t,"2x"),"4x":f.emoteUrl(t,"3x")},imageType:n}))}),h.emit("emotes.updated")}}},{key:"provider",get:function(){return y}}]),t}(g);t.exports=new _},{"../../socket-client":56,"../../utils/cdn":59,"../../utils/twitch":71,"../../watcher":72,"./abstract-emotes":30,"./emote":33,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/getPrototypeOf":79,"@babel/runtime/helpers/inherits":80,"@babel/runtime/helpers/interopRequireDefault":81,"@babel/runtime/helpers/possibleConstructorReturn":84,"@babel/runtime/helpers/toConsumableArray":86}],37:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),i=a(e("@babel/runtime/helpers/possibleConstructorReturn")),s=a(e("@babel/runtime/helpers/getPrototypeOf")),c=a(e("@babel/runtime/helpers/inherits")),l=e("../../watcher"),u=e("../../utils/api"),d=e("../../utils/twitch"),h=e("../../settings"),p=e("../emotes/abstract-emotes"),f=e("../emotes/emote"),g={id:"ffz-channel",displayName:"FrankerFaceZ Channel Emotes"},m=function(e){function t(){var e;return(0,n.default)(this,t),e=(0,i.default)(this,(0,s.default)(t).call(this)),l.on("channel.updated",function(){return e.updateChannelEmotes()}),e}return(0,c.default)(t,e),(0,o.default)(t,[{key:"updateChannelEmotes",value:function(){var i=this;if(this.emotes.clear(),h.get("ffzEmotes")){var e=d.getCurrentChannel();e&&u.get("cached/frankerfacez/users/twitch/".concat(e.id)).then(function(e){return e.forEach(function(e){var t=e.id,r=e.user,a=e.code,n=e.images,o=e.imageType;i.emotes.set(a,new f({id:t,provider:i.provider,channel:r,code:a,images:n,imageType:o}))})}).then(function(){return l.emit("emotes.updated")})}}},{key:"provider",get:function(){return g}}]),t}(p);t.exports=new m},{"../../settings":55,"../../utils/api":58,"../../utils/twitch":71,"../../watcher":72,"../emotes/abstract-emotes":30,"../emotes/emote":33,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/getPrototypeOf":79,"@babel/runtime/helpers/inherits":80,"@babel/runtime/helpers/interopRequireDefault":81,"@babel/runtime/helpers/possibleConstructorReturn":84}],38:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),i=a(e("@babel/runtime/helpers/possibleConstructorReturn")),s=a(e("@babel/runtime/helpers/getPrototypeOf")),c=a(e("@babel/runtime/helpers/inherits")),l=e("../../utils/api"),u=e("../../watcher"),d=e("../../settings"),h=e("../emotes/abstract-emotes"),p=e("../emotes/emote"),f={id:"ffz-global",displayName:"FrankerFaceZ Global Emotes"},g=function(e){function t(){var e;return(0,n.default)(this,t),e=(0,i.default)(this,(0,s.default)(t).call(this)),d.add({id:"ffzEmotes",name:"FrankerFaceZ Emotes",defaultValue:!0,description:"Emotes from that other extension people sometimes use."}),d.on("changed.ffzEmotes",function(){return e.updateGlobalEmotes()}),e.updateGlobalEmotes(),e}return(0,c.default)(t,e),(0,o.default)(t,[{key:"updateGlobalEmotes",value:function(){var i=this;this.emotes.clear(),d.get("ffzEmotes")&&l.get("cached/frankerfacez/emotes/global").then(function(e){return e.forEach(function(e){var t=e.id,r=e.user,a=e.code,n=e.images,o=e.imageType;i.emotes.set(a,new p({id:t,provider:i.provider,channel:r,code:a,images:n,imageType:o}))})}).then(function(){return u.emit("emotes.updated")})}},{key:"provider",get:function(){return f}}]),t}(h);t.exports=new g},{"../../settings":55,"../../utils/api":58,"../../watcher":72,"../emotes/abstract-emotes":30,"../emotes/emote":33,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/getPrototypeOf":79,"@babel/runtime/helpers/inherits":80,"@babel/runtime/helpers/interopRequireDefault":81,"@babel/runtime/helpers/possibleConstructorReturn":84}],39:[function(e,t,r){"use strict";var a,n=e("@babel/runtime/helpers/interopRequireDefault"),o=n(e("@babel/runtime/helpers/classCallCheck")),i=n(e("@babel/runtime/helpers/createClass")),s=e("jquery"),c=e("../../utils/cdn"),l=e("../../utils/extension"),u=e("../../settings"),d=e("../../watcher"),h=e("../../utils/twitch"),p=0,f=1,g=function(){function e(){var t=this;(0,o.default)(this,e),this.globalCSS(),d.on("load",function(){return t.branding()}),this.branding(),u.add({id:"darkenedMode",name:"Dark Theme",defaultValue:!1,description:"Enable Twitch's dark theme"}),u.on("changed.darkenedMode",function(e){return t.setTwitchTheme(e)}),this.loadTwitchThemeObserver(),this.dismissPinnedCheers()}return(0,i.default)(e,[{key:"setTwitchTheme",value:function(e){if(a){var t=!0===e?f:p;try{localStorage.setItem("twilight.theme",JSON.stringify(t))}catch(e){}a.dispatch({type:"core.ui.THEME_CHANGED",theme:t})}}},{key:"loadTwitchThemeObserver",value:function(){(a=h.getConnectStore())&&a.subscribe(function(){var e=a.getState().ui.theme===f;u.get("darkenedMode")!==e&&u.set("darkenedMode",e,!1,!0)})}},{key:"globalCSS",value:function(){var e=document.createElement("link");e.setAttribute("href",l.url("betterttv.css",!0)),e.setAttribute("type","text/css"),e.setAttribute("rel","stylesheet"),s("body").append(e)}},{key:"branding",value:function(){if(!s(".bttv-logo").length){var e=s("<img />");e.attr("class","bttv-logo"),e.attr("src",c.url("assets/logos/logo_icon.png")),e.css({"z-index":9e3,left:"-74px",top:"-18px",width:"12px",height:"auto",position:"relative"}),s(".top-nav__home-link").append(e)}}},{key:"dismissPinnedCheers",value:function(){s("body").on("click",".pinned-cheer",function(e){e.target===s(".pinned-cheer .pinned-cheer__bounding-box")[0]&&(15<e.target.offsetWidth-e.offsetX||15<e.offsetY||s(".pinned-cheer").hide())})}}]),e}();t.exports=new g},{"../../settings":55,"../../utils/cdn":59,"../../utils/extension":63,"../../utils/twitch":71,"../../watcher":72,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81,jquery:93}],40:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),i=e("../../settings"),s=e("jquery"),c=function(){function t(){var e=this;(0,n.default)(this,t),i.add({id:"hideBits",name:"Hide Bits",defaultValue:!1,description:"Bits can be annoying. Disable 'em in chat with this (we can't block 'em on stream, sry)"}),i.on("changed.hideBits",function(){return e.load()}),this.load()}return(0,o.default)(t,[{key:"load",value:function(){s("body").toggleClass("bttv-hide-bits",i.get("hideBits"))}}]),t}();t.exports=new c},{"../../settings":55,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81,jquery:93}],41:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),i=e("jquery"),s=e("../../settings"),c=function(){function t(){var e=this;(0,n.default)(this,t),s.add({id:"hideChannelPoints",name:"Hide Channel Points",defaultValue:!1,description:"Hides channel points from the chat UI to reduce clutter"}),s.on("changed.hideChannelPoints",function(){return e.load()}),this.load()}return(0,o.default)(t,[{key:"load",value:function(){i("body").toggleClass("bttv-hide-channel-points",s.get("hideChannelPoints"))}}]),t}();t.exports=new c},{"../../settings":55,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81,jquery:93}],42:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),i=e("jquery"),s=e("../../settings"),c=function(){function t(){var e=this;(0,n.default)(this,t),s.add({id:"hideChatClips",name:"Hide Chat Clips",defaultValue:!1,description:"Hides clips embeds in chat"}),s.on("changed.hideChatClips",function(){return e.load()}),this.load()}return(0,o.default)(t,[{key:"load",value:function(){i("body").toggleClass("bttv-hide-chat-clips",s.get("hideChatClips"))}}]),t}();t.exports=new c},{"../../settings":55,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81,jquery:93}],43:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),i=e("../../settings"),s=e("../../watcher"),c=e("../../utils/twitch"),l=function(){function e(){var t=this;(0,n.default)(this,e),i.add({id:"hideNewViewerGreeting",name:"Hide New Viewer Greeting",defaultValue:!1,description:"Hides the new viewer greeting message from the chat"}),i.add({id:"hideSubscriptionNotices",name:"Hide Subscription and Resubscription notices",defaultValue:!1,description:"Hides subs, re-subs, and gift subs from the chat"}),s.on("chat.message.handler",function(e){t.handleMessage(e)})}return(0,o.default)(e,[{key:"handleMessage",value:function(e){var t=e.message,r=e.preventDefault;switch(t.type){case c.TMIActionTypes.RITUAL:i.get("hideNewViewerGreeting")&&r();break;case c.TMIActionTypes.SUBSCRIPTION:case c.TMIActionTypes.RESUBSCRIPTION:case c.TMIActionTypes.SUBGIFT:i.get("hideSubscriptionNotices")&&r()}}}]),e}();t.exports=new l},{"../../settings":55,"../../utils/twitch":71,"../../watcher":72,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81}],44:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),i=e("../../settings"),s=e("jquery"),c=function(){function t(){var e=this;(0,n.default)(this,t),i.add({id:"hideFriends",name:"Hide Friends",defaultValue:!1,description:"Hides the friends list from the left sidebar"}),i.on("changed.hideFriends",function(){return e.toggleFriendsList()}),this.toggleFriendsList()}return(0,o.default)(t,[{key:"toggleFriendsList",value:function(){s("body").toggleClass("bttv-hide-friends",i.get("hideFriends"))}}]),t}();t.exports=new c},{"../../settings":55,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81,jquery:93}],45:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),i=e("jquery"),s=e("../../settings"),c=e("../../watcher"),l=function(){function e(){(0,n.default)(this,e),s.add({id:"hidePrimePromotions",name:"Hide Prime Promotions",defaultValue:!1,description:"Hides Twitch Prime loot notices, like the ones in the sidebar"}),s.on("changed.hidePrimePromotions",this.togglePrimePromotions),c.on("load",this.togglePrimePromotions)}return(0,o.default)(e,[{key:"togglePrimePromotions",value:function(){i("body").toggleClass("bttv-hide-prime-promotions",s.get("hidePrimePromotions"))}}]),e}();t.exports=new l},{"../../settings":55,"../../watcher":72,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81,jquery:93}],46:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),i=e("jquery"),s=e("../../settings"),c=function(){function t(){var e=this;(0,n.default)(this,t),s.add({id:"hideRoomSelector",name:"Hide Chat Header",defaultValue:!1,description:"Hides the room selector and viewer list button above chat"}),s.on("changed.hideRoomSelector",function(){return e.load()}),this.load()}return(0,o.default)(t,[{key:"load",value:function(){i("body").toggleClass("bttv-hide-room-selector",s.get("hideRoomSelector"))}}]),t}();t.exports=new c},{"../../settings":55,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81,jquery:93}],47:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),i=e("jquery"),s=e("../../watcher"),c=e("../../settings"),l=function(){function t(){var e=this;(0,n.default)(this,t),c.add({id:"hideFeaturedChannels",name:"Hide Recommended Channels",defaultValue:!0,description:"The left sidebar is too cluttered, so you can remove recommended channels"}),c.add({id:"autoExpandChannels",name:"Auto Expand Followed Channels List",defaultValue:!1,description:'Automatically clicks the "Load More" option for you'}),c.add({id:"hideRecommendedFriends",name:"Hide Recommended Friends",defaultValue:!1,description:"Hides the Recommended Friends section so you have more room for activities!"}),c.add({id:"hideOfflineFollowedChannels",name:"Hide Offline Followed Channels",defaultValue:!1,description:"Hides all offline followed channels for those who follow a ton of channels"}),c.on("changed.hideFeaturedChannels",function(){return e.toggleFeaturedChannels()}),c.on("changed.autoExpandChannels",function(){return e.toggleAutoExpandChannels()}),c.on("changed.hideRecommendedFriends",function(){return e.toggleRecommendedFriends()}),c.on("changed.hideOfflineFollowedChannels",function(){return e.toggleOfflineFollowedChannels()}),s.on("load",function(){e.toggleFeaturedChannels(),e.toggleAutoExpandChannels(),e.toggleRecommendedFriends(),e.toggleOfflineFollowedChannels()})}return(0,o.default)(t,[{key:"toggleFeaturedChannels",value:function(){i("body").toggleClass("bttv-hide-featured-channels",c.get("hideFeaturedChannels"))}},{key:"toggleAutoExpandChannels",value:function(){c.get("autoExpandChannels")&&i('.side-nav button[data-a-target="side-nav-show-more-button"]').first().trigger("click")}},{key:"toggleRecommendedFriends",value:function(){i("body").toggleClass("bttv-hide-recommended-friends",c.get("hideRecommendedFriends"))}},{key:"toggleOfflineFollowedChannels",value:function(){i("body").toggleClass("bttv-hide-followed-offline",c.get("hideOfflineFollowedChannels"))}}]),t}();t.exports=new l},{"../../settings":55,"../../watcher":72,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81,jquery:93}],48:[function(e,t,r){"use strict";var a,n=e("@babel/runtime/helpers/interopRequireDefault"),o=n(e("@babel/runtime/helpers/classCallCheck")),i=n(e("@babel/runtime/helpers/createClass")),s=e("jquery"),c=e("../../settings"),l=e("../../watcher"),u=e("../../utils/twitch"),d=e("../../utils/tmi-api"),h="bttv-host-button",p=!1,f='\n    <div class="tw-mg-l-1">\n        <button id="'.concat(h,'" class="tw-button tw-button--hollow">\n            <span class="tw-button__text">Host Channel</span>\n        </button>\n    </div>\n'),g=function(){function e(){var t=this;(0,o.default)(this,e),c.add({id:"hostButton",name:"Host Button",defaultValue:!1,description:"Places a Host/Unhost button below the video player"}),c.on("changed.hostButton",function(e){return!0===e?t.load():t.unload()}),l.on("load.chat",function(){return t.load()})}return(0,i.default)(e,[{key:"load",value:function(){if(!1!==c.get("hostButton")){var e=u.getCurrentUser(),t=u.getCurrentChannel();t&&e.id!==t.id&&(a=s(f),this.embedHostButton(),this.updateHostingState(e.id,t.id))}}},{key:"embedHostButton",value:function(){var e=this;if(!s("#".concat(h)).length){var t=s('button[data-a-target="share-button"]').closest("[data-toggle-balloon-id]").parent(".tw-mg-l-05");t.length&&(a.insertBefore(t),a.find("button").click(function(){return e.toggleHost()}))}}},{key:"toggleHost",value:function(){var e=u.getCurrentUser(),t=p?"unhost":"host";try{var r=u.getCurrentChannel().name,a="PRIVMSG #".concat(e.name," :/").concat("host"==t?"".concat(t," ").concat(r):t);u.getChatServiceSocket().send(a),p=!p,this.updateHostButtonText(),u.sendChatAdminMessage("BetterTTV: We sent a /".concat(t," to your channel."))}catch(e){u.sendChatAdminMessage("\n                BetterTTV: There was an error ".concat(t,"ing the channel.\n                You may need to ").concat(t," it from your channel.\n            "))}}},{key:"updateHostingState",value:function(e,a){var n=this;return d.get("hosts",{qs:{host:e}}).then(function(e){var t=e.hosts;if(Array.isArray(t)&&t.length){var r=t[0];r&&r.target_id&&(p=r.target_id.toString()===a,n.updateHostButtonText())}})}},{key:"updateHostButtonText",value:function(){var e=p?"Unhost Channel":"Host Channel";a.find("span").text(e)}},{key:"unload",value:function(){a&&a.remove()}}]),e}();t.exports=new g},{"../../settings":55,"../../utils/tmi-api":69,"../../utils/twitch":71,"../../watcher":72,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81,jquery:93}],49:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),i=e("../../socket-client"),s=e("../../utils/twitch"),c=new Map;var l=function(){function e(){(0,n.default)(this,e),i.on("lookup_user",function(e){return function(e){var t=e.name,r=e.subscribed,a=e.glow;c.set(t,{subscribed:r,glow:a})}(e)}),i.on("new_subscriber",function(e){return function(e){var t=e.user;c.set(t,{subscribed:!0,glow:!1}),s.sendChatAdminMessage("".concat(t," just subscribed!"))}(e)})}return(0,o.default)(e,[{key:"hasGlow",value:function(e){var t=c.get(e);return!!t&&t.glow}},{key:"hasSubscription",value:function(e){var t=c.get(e);return!!t&&t.subscribed}}]),e}();t.exports=new l},{"../../socket-client":56,"../../utils/twitch":71,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81}],50:[function(e,t,r){"use strict";var p,a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),f=e("../../utils/twitch"),i=e("../../watcher"),g=e("../../utils/debug"),m=e("../../socket-client"),y=e("raven-js"),s=e("../chat_tab_completion"),c=e("../chat_commands"),l=e("../anon_chat"),u=e("../emotes/emojis"),d=Symbol(),b=function(){function t(e){(0,n.default)(this,t),this.message=e,this.defaultPrevented=!1}return(0,o.default)(t,[{key:"preventDefault",value:function(){this.defaultPrevented=!0,this.message=""}},{key:"user",get:function(){return f.getCurrentUser()}}]),t}(),_=[function(e){return s.onSendMessage(e)},function(e){return c.onSendMessage(e)},function(e){return l.onSendMessage(e)},function(e){return u.onSendMessage(e)}];function h(e){var t,r=f.getCurrentChannel();if(r&&m.broadcastMe(r.name),"string"==typeof e){var a=new b(e),n=!0,o=!1,i=void 0;try{for(var s,c=_[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var l=s.value;try{l(a)}catch(e){y.captureException(e),g.log(e)}}}catch(e){o=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw i}}if(a.defaultPrevented)return Promise.resolve();e=a.message}for(var u=arguments.length,d=new Array(1<u?u-1:0),h=1;h<u;h++)d[h-1]=arguments[h];return(t=p).call.apply(t,[this,e].concat(d))}var k=function(){function t(){var e=this;(0,n.default)(this,t),i.on("load.chat",function(){return e.patch()})}return(0,o.default)(t,[{key:"patch",value:function(){var e=f.getChatController();e&&e._bttvSendMessagePatched!==d&&e.sendMessage!==h&&(e._bttvSendMessagePatched=d,p=e.sendMessage,e.sendMessage=h,e.forceUpdate())}}]),t}();t.exports=new k},{"../../socket-client":56,"../../utils/debug":61,"../../utils/twitch":71,"../../watcher":72,"../anon_chat":2,"../chat_commands":5,"../chat_tab_completion":20,"../emotes/emojis":32,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81,"raven-js":103}],51:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),i=e("jquery"),s=e("../../utils/cdn"),c=e("../../utils/debug"),l=e("../../utils/filesaver").saveAs,u=e("../../watcher"),d=e("../../settings"),h=e("../../storage"),p=e("../../utils/html"),f=e("../../utils/api"),g=e("moment");var m={};function y(t){if(!m[t.id]){m[t.id]=t;var e=Object.values(m);e.sort(function(e,t){return e.name.localeCompare(t.name)});var r=e.findIndex(function(e){return e.id===t.id})-1,a=function(e){var t=e.id,r=e.name,a=e.description;return'\n    <div id="option" class="option bttvOption-'.concat(p.escape(t),'">\n        <span style="font-weight:bold;font-size:14px;color:#D3D3D3;">').concat(p.escape(r),'</span>\n        <span class="description"> â€” ').concat(p.escape(a),'</span>\n        <div class="bttv-switch">\n            <input class="bttv-switch-input bttv-switch-off" type="radio" name=').concat(p.escape(t),' value="false" id="').concat(p.escape(t),'False" />\n            <label class="bttv-switch-label bttv-switch-label-off" for="').concat(p.escape(t),'False">Off</label>\n            <input class="bttv-switch-input" type="radio" name=').concat(p.escape(t),' value="true" id="').concat(p.escape(t),'True" />\n            <label class="bttv-switch-label bttv-switch-label-on" for="').concat(p.escape(t),'True">On</label>\n            <span class="bttv-switch-selection"></span>\n        </div>\n    </option>\n')}(t);-1==r?i("#bttvSettings.options-list input#bttvSettingsSearch").after(a):function(e){var t=e.id;return i(".bttvOption-".concat(p.escape(t)))}(e[r]).after(a),i(d.get(t.id)?"#".concat(t.id,"True"):"#".concat(t.id,"False")).prop("checked",!0)}}var b=function(){function t(){var e=this;(0,n.default)(this,t),u.on("load",function(){e.renderSettings(),e.renderSettingsMenuOption()}),this.renderSettingsMenuOption=this.renderSettingsMenuOption.bind(this)}return(0,o.default)(t,[{key:"renderSettings",value:function(){var r=this;if(!i("#bttvSettings").length){var e=document.createElement("div");e.setAttribute("id","bttvSettingsPanel"),e.style.display="none",e.innerHTML='\n    <div id="header">\n        <span id="logo"><img height="45px" src="'.concat(s.url("assets/logos/settings_logo.png"),'" /></span>\n        <ul class="nav">\n            <li><a href="#bttvAbout">About</a></li>\n            <li class="active"><a href="#bttvSettings">Settings</a></li>\n            <li><a href="#bttvChannel">Channel</a></li>\n            <li><a href="#bttvChangelog">Changelog</a></li>\n            <li><a href="#bttvPrivacy">Privacy Policy</a></li>\n            <li><a href="#bttvBackup">Backup/Import</a></li>\n        </ul>\n        <span id="close">&times;</span>\n    </div>\n    <div id="bttvSettings" class="options-list">\n        <input type="text" placeholder="Search settings" id="bttvSettingsSearch" class="option">\n    </div>\n    <div id="bttvAbout" style="display:none;">\n        <div class="aboutHalf">\n            <img class="bttvAboutIcon" src="').concat(s.url("assets/logos/mascot.png"),'" />\n            <h1>BetterTTV v').concat(c.version,'</h1>\n            <h2>from your friends at <a href="https://www.nightdev.com" target="_blank">NightDev</a></h2>\n            <br>\n        </div>\n        <div class="aboutHalf">\n            <h1 style="margin-top: 100px;">Think this addon is awesome?</h1>\n            <br>\n            <br>\n            <h2>\n                <a target="_blank" href="https://chrome.google.com/webstore/detail/ajopnjidmegmdimjlfnijceegpefgped">Drop a Review on the Chrome Webstore</a>\n            </h2>\n            <br>\n            <h2>or maybe</h2>\n            <br>\n            <h2><a target="_blank" href="https://manage.betterttv.net/channel">Subscribe to BetterTTV Pro</a></h2>\n            <br>\n        </div>\n    </div>\n    <div id="bttvChannel" style="display:none;">\n        <iframe frameborder="0" width="100%" height="425"></iframe>\n    </div>\n    <div id="bttvPrivacy" style="display:none;">\n    </div>\n    <div id="bttvChangelog" style="display:none;">\n        <h1>Changelog</h1><div class="bttv-changelog-releases"></div>\n    </div>\n    <div id="bttvBackup" style="display:none;">\n        <h4 style="padding-bottom:10px;">Backup Settings</h4>\n        <button id="bttvBackupButton" class="button primary"><span>Download</span></button>\n        <h4 style="padding-top:15px;padding-bottom:10px;">Import Settings</h4>\n        <input id="bttvImportInput" type="file" style="height: 25px;width: 250px;" />\n    </div>\n    <div id="footer">\n        <span>BetterTTV &copy; <a href="https://www.nightdev.com" target="_blank">NightDev, LLC</a> ').concat((new Date).getFullYear(),'</span>\n        <span style="float:right;">\n            <a href="https://twitter.com/betterttv" target="_blank">Twitter</a> | \n            <a href="https://community.nightdev.com/c/betterttv" target="_blank">Forums</a> | \n            <a href="https://github.com/night/BetterTTV/issues/new?labels=bug" target="_blank">Bug Report</a> | \n            <a href="https://discord.gg/nightdev" target="_blank">Discord</a>\n        </span>\n    </div>\n'),i("body").append(e),s.get("privacy.html").then(function(e){return i("#bttvPrivacy").html(e)}),f.get("cached/changelog").then(function(e){return e.map(function(e){return function(e,t,r){return"\n    <h2>Version ".concat(p.escape(e)," (").concat(g(t).format("MMM D, YYYY"),")</h2>\n    <p>").concat(p.escape(r).replace(/\r\n/g,"<br />").replace(/ #([0-9]+)/g,' <a href="https://github.com/night/BetterTTV/issues/$1" target="_blank">#$1</a>'),"</p>\n")}(e.version,e.publishedAt,e.body)})}).then(function(e){return i("#bttvChangelog .bttv-changelog-releases").html(e.join(""))}),i("#bttvSettings").on("change",".option input:radio",function(e){var t=e.target;return d.set(t.name,"true"===t.value)}),i("#bttvBackupButton").click(function(){return r.backup()}),i("#bttvImportInput").change(function(e){var t=e.target;return r.import(t)}),i("#bttvSettingsSearch").on("input",function(){return r.doSearch()}),i("#bttvSettingsPanel #close").click(function(){return i("#bttvSettingsPanel").hide("slow")}),i("#bttvSettingsPanel .nav a").click(function(e){e.preventDefault();var t=i(e.target),r=t.attr("href");i("#bttvSettingsPanel .nav a").each(function(e,t){var r=i(t),a=r.attr("href");i(a).hide(),r.parent("li").removeClass("active")}),"#bttvChannel"===r&&i(r).children("iframe").attr("src","https://manage.betterttv.net/channel"),i(r).fadeIn(),t.parent("li").addClass("active")}),d.getSettings().forEach(function(e){return y(e)})}}},{key:"renderSettingsMenuOption",value:function(){i(".bttvSettingsIconDropDown").length||(i('button[data-test-selector="user-menu__toggle"]').off("click",this.renderSettingsMenuOption).on("click",this.renderSettingsMenuOption),i('a[data-a-target="settings-dropdown-link"]').parent("div.tw-full-width.tw-relative").after('\n            <div class="tw-full-width tw-relative">\n                <a title="BetterTTV Settings" class="tw-block tw-border-radius-medium tw-full-width tw-interactable--alpha tw-interactable--hover-enabled tw-interactable tw-interactive bttvSettingsDropDown" href="#">\n                    <div class="tw-align-items-center tw-flex tw-pd-05 tw-relative">\n                        <div class="tw-align-items-center tw-flex tw-pd-r-05">\n                            <div class="tw-align-items-center tw-drop-down-menu-item-figure tw-flex">\n                                <div class="tw-align-items-center tw-icon tw-inline-flex">\n                                    <div class="tw-aspect tw-aspect--align-top">\n                                        <div class="tw-aspect__spacer" style="padding-bottom: 100%;"></div>\n                                        <figure class="icon bttvSettingsIconDropDown"></figure>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="tw-flex-grow-1">BetterTTV Settings</div>\n                    </div>\n                </a>\n            </div>\n        '),i(".bttvSettingsIconDropDown").closest("a").click(this.openSettings))}},{key:"openSettings",value:function(e){e.preventDefault(),i("#bttvSettingsPanel").show("slow")}},{key:"backup",value:function(){var e=h.getStorage();e=new Blob([JSON.stringify(e)],{type:"text/plain;charset=utf-8;"}),l(e,"bttv_settings.backup")}},{key:"import",value:function(e){!function(e,r){var t=new FileReader;t.onload=function(e){var t=e.target;return r(t.result)};var a=e.files[0];a?t.readAsText(a):r(null)}(e,function(e){if(function(e){try{JSON.parse(e)}catch(e){return!1}return!0}(e)){var t=JSON.parse(e);Object.keys(t).forEach(function(e){return d.set(e.split("bttv_")[1],t[e])}),setTimeout(function(){return window.location.reload()},1e3)}})}},{key:"doSearch",value:function(){var r=i("#bttvSettingsSearch").val().trim().toLowerCase();""!==r?d.getSettings().forEach(function(e){var t=e.name.toLowerCase().includes(r)||e.description.toLowerCase().includes(r);i(".bttvOption-".concat(e.id)).css("display",t?"block":"none")}):i('[class^="option bttvOption-"]').css("display","block")}}]),t}();t.exports=new b},{"../../settings":55,"../../storage":57,"../../utils/api":58,"../../utils/cdn":59,"../../utils/debug":61,"../../utils/filesaver":64,"../../utils/html":65,"../../watcher":72,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81,jquery:93,moment:96}],52:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),i=e("../../settings"),s=!1,c=function(){function e(){(0,n.default)(this,e),i.add({id:"splitChat",name:"Split Chat",defaultValue:!1,description:"Easily distinguish between messages from different users in chat"})}return(0,o.default)(e,[{key:"render",value:function(e){!1!==i.get("splitChat")&&(s&&e.toggleClass("bttv-split-chat-alt-bg"),s=!s)}}]),e}();t.exports=new c},{"../../settings":55,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81}],53:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),i=e("jquery"),s=e("../../watcher"),c=e("../../settings"),l=e("../../utils/keycodes"),u=e("../../utils/twitch"),d=e("lodash.debounce"),h=".video-player .player,.highwind-video-player__container",p=".recommendations-overlay .pl-rec__cancel.pl-button, .autoplay-vod__content-container button";function f(e){var t=u.getCurrentPlayer();if(t){var r=[.25,.5,.75,1,1.25,1.5,2],a=r.indexOf(t.getPlaybackRate());-1!==a&&((a+=e?1:-1)<0||a>=r.length||t.setPlaybackRate(r[a]))}}function g(e){if(!e.ctrlKey&&!e.metaKey&&!i("input, textarea, select").is(":focus")){var t=i(h);if(t.length)switch(e.charCode||e.keyCode){case l.Comma:f(!1);break;case l.Period:f(!0);break;case l.K:t.find(".qa-pause-play-button").click();break;case l.F:t.find(".qa-fullscreen-button").click();break;case l.M:t.find(".qa-control-volume").click()}}}var m=0;function y(){var e=u.getCurrentPlayer();if(e){var t=e.paused;m++,setTimeout(function(){1===m&&(t||e.pause()),m=0},250)}}function b(e){i("body").toggleClass("bttv-hide-player-cursor",e)}var _=function(){function t(){var e=this;(0,n.default)(this,t),this.keybinds(),s.on("load.player",function(){e.clickToPause(),function(){var e=u.getCurrentPlayer();if(e){var t=function(){!0===c.get("disableVodRecommendationAutoplay")&&s.waitForLoad("vodRecommendation").then(function(){return i(p).trigger("click")})};e.emitter?e.emitter.on("Ended",t):e.addEventListener("ended",t)}}()}),c.add({id:"hidePlayerExtensions",name:"Hide Twitch Extensions",defaultValue:!1,description:"Hides the interactive overlays on top of Twitch's video player"}),c.add({id:"clickToPlay",name:"Click to Play/Pause Stream",defaultValue:!1,description:"Click on the twitch player to pause/resume playback"}),c.add({id:"disableVodRecommendationAutoplay",name:"Disable VoD Recommendation Autoplay",defaultValue:!1,description:"Disables autoplay of recommended videos on VoDs"}),c.on("changed.hidePlayerExtensions",function(){return e.toggleHidePlayerExtensions()}),c.on("changed.clickToPlay",function(){return e.clickToPause()}),this.toggleHidePlayerExtensions(),this.loadHidePlayerCursorFullscreen()}return(0,o.default)(t,[{key:"toggleHidePlayerExtensions",value:function(){i("body").toggleClass("bttv-hide-player-extensions",c.get("hidePlayerExtensions"))}},{key:"keybinds",value:function(){i(document).on("keydown.playerControls",g)}},{key:"clickToPause",value:function(){i(h).off("click",'.player-overlay.pl-overlay__fullscreen,.player-video,.tw-c-text-overlay > div,.js-paused-overlay,.highwind-video-player__overlay div[data-a-target="player-overlay-click-handler"]',y),!0===c.get("clickToPlay")&&i(h).on("click",'.player-overlay.pl-overlay__fullscreen,.player-video,.tw-c-text-overlay > div,.js-paused-overlay,.highwind-video-player__overlay div[data-a-target="player-overlay-click-handler"]',y)}},{key:"loadHidePlayerCursorFullscreen",value:function(){var e=d(function(){return b(!0)},5e3);i("body").on("mousemove",'.video-player--fullscreen,div[data-test-selector="highwind-video-player__video-layout"]',function(){b(!1),e()})}}]),t}();t.exports=new _},{"../../settings":55,"../../utils/keycodes":66,"../../utils/twitch":71,"../../watcher":72,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81,jquery:93,"lodash.debounce":94}],54:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),d=e("jquery"),h=e("../chat"),p=e("../chat_nicknames"),i=e("../../watcher"),f=e("../../utils/colors"),g=/rgb\(([0-9]+), ([0-9]+), ([0-9]+)\)/;var s=function(){function e(){var t=this;(0,n.default)(this,e),i.on("vod.message",function(e){return t.parseMessage(e)}),i.on("load.vod",function(){return d('textarea[data-a-target="video-chat-input"]').attr("maxlength","500")})}return(0,o.default)(e,[{key:"parseMessage",value:function(e){var t=e.find(".video-chat__message-author"),r=t.find(".chat-author__display-name,.chat-author__intl-login"),a=r.css("color"),n=g.exec(a),o=n?f.getHex({r:n[1],g:n[2],b:n[3]}):null,i={name:t.attr("href").split("?")[0].split("/").pop(),color:o};if(i.color){var s=h.calculateColor(i.color);r.css("color",s);var c=e.attr("style");c&&c.includes("color:")&&e.css("color",s)}var l=p.get(i.name);l&&r.text(l);var u=e.find('.video-chat__message span[data-a-target="chat-message-text"]');h.messageReplacer(u,i),function(e){0<d(".video-chat__sync-button").length||e.find("img.bttv").on("load",function(){var e=d(".video-chat__message-list-wrapper");e.scrollTop(e[0].scrollHeight)})}(e)}}]),e}();t.exports=new s},{"../../utils/colors":60,"../../watcher":72,"../chat":4,"../chat_nicknames":16,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/interopRequireDefault":81,jquery:93}],55:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),i=a(e("@babel/runtime/helpers/possibleConstructorReturn")),s=a(e("@babel/runtime/helpers/getPrototypeOf")),c=a(e("@babel/runtime/helpers/inherits")),l=e("./utils/safe-event-emitter"),u=e("./storage"),d={},h=function(e){function t(){return(0,n.default)(this,t),(0,i.default)(this,(0,s.default)(t).call(this))}return(0,c.default)(t,e),(0,o.default)(t,[{key:"add",value:function(e){var t=e.id,r=e.name,a=e.description,n=e.defaultValue;if(t in d)throw new Error("".concat(t," is already a defined setting."));d[t]={id:t,name:r,description:a,defaultValue:n},this.emit("added",d[t])}},{key:"getSettings",value:function(){var t=this;return Object.values(d).map(function(e){return Object.assign({value:t.get(e.id)},e)})}},{key:"get",value:function(e){var t=u.get(e);if(null!==t)return t;var r=d[e];return r?r.defaultValue:null}},{key:"set",value:function(e,t,r,a){var n=!(2<arguments.length&&void 0!==r)||r,o=3<arguments.length&&void 0!==a&&a,i=u.set(e,t,void 0,!1,!0,o);return n&&this.emit("changed.".concat(e),t),i}}]),t}(l);t.exports=new h},{"./storage":57,"./utils/safe-event-emitter":68,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/getPrototypeOf":79,"@babel/runtime/helpers/inherits":80,"@babel/runtime/helpers/interopRequireDefault":81,"@babel/runtime/helpers/possibleConstructorReturn":84}],56:[function(e,t,r){"use strict";var n,a=e("@babel/runtime/helpers/interopRequireDefault"),o=a(e("@babel/runtime/helpers/classCallCheck")),i=a(e("@babel/runtime/helpers/createClass")),s=a(e("@babel/runtime/helpers/possibleConstructorReturn")),c=a(e("@babel/runtime/helpers/getPrototypeOf")),l=a(e("@babel/runtime/helpers/assertThisInitialized")),u=a(e("@babel/runtime/helpers/inherits")),d=e("./utils/safe-event-emitter"),h=e("./utils/debug"),p=e("./utils/twitch"),f=e("lodash.throttle"),g=0,m=1,y=2,b=g,_=1,k=[],w=function(e){function t(){var e;return(0,o.default)(this,t),(e=(0,s.default)(this,(0,c.default)(t).call(this))).connect(),e.broadcastMe=f(e.broadcastMe.bind((0,l.default)(e)),1e3,{leading:!1}),e}return(0,u.default)(t,e),(0,i.default)(t,[{key:"connect",value:function(){var a=this;b===g&&(b=m,h.log("SocketClient: Connecting to server"),(n=new WebSocket("wss://sockets.betterttv.net/ws")).onopen=function(){h.log("SocketClient: Connected to server"),b=y,_=1,k.length&&k.forEach(function(e){return a.joinChannel(e)})},n.onerror=n.onclose=function(){b!==g&&(h.log("SocketClient: Disconnected from server"),_++,a.reconnect())},n.onmessage=function(e){var t,r=e.data;try{t=JSON.parse(r)}catch(e){return void h.log("SocketClient: Error parsing message",e)}h.log("SocketClient: Received event",t),a.emit(t.name,t.data)})}},{key:"reconnect",value:function(){var e=this;if(b!==m){if(b=g,n){try{n.close()}catch(e){}n=null}setTimeout(function(){return e.connect()},Math.random()*(Math.pow(2,_)-1)*3e4)}}},{key:"send",value:function(e,t){b===y&&n.send(JSON.stringify({name:e,data:t}))}},{key:"joinChannel",value:function(e){k.includes(e)||k.push(e),this.send("join_channel",{name:e}),this.broadcastMe(e)}},{key:"partChannel",value:function(e){k.includes(e)&&(k.splice(k.indexOf(e),1),this.send("part_channel",{name:e}))}},{key:"broadcastMe",value:function(e,t){var r=p.getCurrentUser();r&&this.send("broadcast_me",{name:t||r.name,channel:e})}}]),t}(d);t.exports=new w},{"./utils/debug":61,"./utils/safe-event-emitter":68,"./utils/twitch":71,"@babel/runtime/helpers/assertThisInitialized":75,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/getPrototypeOf":79,"@babel/runtime/helpers/inherits":80,"@babel/runtime/helpers/interopRequireDefault":81,"@babel/runtime/helpers/possibleConstructorReturn":84,"lodash.throttle":95}],57:[function(e,t,r){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault"),n=a(e("@babel/runtime/helpers/classCallCheck")),o=a(e("@babel/runtime/helpers/createClass")),i=a(e("@babel/runtime/helpers/possibleConstructorReturn")),s=a(e("@babel/runtime/helpers/getPrototypeOf")),c=a(e("@babel/runtime/helpers/inherits")),u=e("cookies-js"),l=function(e){function r(){var t;(0,n.default)(this,r),(t=(0,i.default)(this,(0,s.default)(r).call(this)))._cache={},t._prefix="bttv_",t._localStorageSupport=!0;try{window.localStorage.setItem("bttv_test","it works!"),window.localStorage.removeItem("bttv_test")}catch(e){t._localStorageSupport=!1}return t}return(0,c.default)(r,e),(0,o.default)(r,[{key:"getStorage",value:function(){var t=this,r={};return this._localStorageSupport&&Object.keys(window.localStorage).filter(function(e){return e.startsWith("bttv_")}).forEach(function(e){r[e]=t.get(e,null)}),r}},{key:"get",value:function(e,t){var r=1<arguments.length&&void 0!==t?t:this._prefix;if(r&&(e=r+e),e in this._cache)return this._cache[e];try{return JSON.parse(this._localStorageSupport?window.localStorage.getItem(e):u.get(e))}catch(e){return null}}},{key:"set",value:function(e,t,r,a,n,o){var i=2<arguments.length&&void 0!==r?r:this._prefix,s=!(3<arguments.length&&void 0!==a)||a,c=5<arguments.length&&void 0!==o&&o,l=e;if(i&&(l=i+e),(!(4<arguments.length&&void 0!==n)||n||c)&&(this._cache[l]=t),s&&this.emit("changed.".concat(e),t),!c)return t=JSON.stringify(t),this._localStorageSupport?window.localStorage.setItem(l,t):u.set(l,t,{expires:1/0})}}]),r}(e("./utils/safe-event-emitter"));t.exports=new l},{"./utils/safe-event-emitter":68,"@babel/runtime/helpers/classCallCheck":76,"@babel/runtime/helpers/createClass":77,"@babel/runtime/helpers/getPrototypeOf":79,"@babel/runtime/helpers/inherits":80,"@babel/runtime/helpers/interopRequireDefault":81,"@babel/runtime/helpers/possibleConstructorReturn":84,"cookies-js":88}],58:[function(e,t,r){"use strict";var o=e("jquery"),i=e("querystring");function a(e,r,t){var n=2<arguments.length&&void 0!==t?t:{};return new Promise(function(t,a){o.ajax({url:"".concat("https://api.betterttv.net/3/").concat(r).concat(n.qs?"?".concat(i.stringify(n.qs)):""),method:e,dataType:n.dataType||"json",data:n.body?JSON.stringify(n.body):void 0,timeout:3e4,success:function(e){return t(e)},error:function(e){var t=e.status,r=e.responseJSON;return a({status:t,data:r})}})})}t.exports={get:function(e,t){return a("GET",e,t)},post:function(e,t){return a("POST",e,t)},put:function(e,t){return a("PUT",e,t)},patch:function(e,t){return a("PATCH",e,t)},delete:function(e,t){return a("DELETE",e,t)}}},{jquery:93,querystring:99}],59:[function(e,t,r){"use strict";var a=e("jquery"),n=e("./debug"),o="https://cdn.betterttv.net/";t.exports={url:function(e,t){var r=1<arguments.length&&void 0!==t&&t;return"".concat(o).concat(e).concat(r?"?v=".concat(n.version):"")},emoteUrl:function(e,t){var r=1<arguments.length&&void 0!==t?t:"3x";return this.url("emote/".concat(e,"/").concat(r))},get:function(e,t){return a.get("".concat(o).concat(e),t)}}},{"./debug":61,jquery:93}],60:[function(e,t,r){"use strict";function u(e,t,r){e/=255,t/=255,r/=255;var a,n=Math.max(e,t,r),o=Math.min(e,t,r),i=Math.min(Math.max(0,(n+o)/2),1),s=Math.min(Math.max(0,n-o),1);if(0===s)return[s,s,i];switch(n){case e:a=Math.min(Math.max(0,(t-r)/s+(t<r?6:0)),6);break;case t:a=Math.min(Math.max(0,(r-e)/s+2),6);break;case r:a=Math.min(Math.max(0,(e-t)/s+4),6)}var c=.5<i?s/(2*(1-i)):s/(2*i);return[a/=6,c=Math.min(Math.max(0,c),1),i]}function d(e,t,r){function a(e,t,r){return r<0&&(r+=1),1<r&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}if(0===t){var n=Math.round(Math.min(Math.max(0,255*r),255));return[n,n,n]}var o=r<.5?r*(1+t):r+t-r*t,i=2*r-o;return[Math.round(Math.min(Math.max(0,255*a(i,o,e+1/3)),255)),Math.round(Math.min(Math.max(0,255*a(i,o,e)),255)),Math.round(Math.min(Math.max(0,255*a(i,o,e-1/3)),255))]}function o(e){return(e=e.replace(/[^0-9a-f]/gi,"")).length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),128<=(299*parseInt(e.substr(0,2),16)+587*parseInt(e.substr(2,2),16)+114*parseInt(e.substr(4,2),16))/1e3?"dark":"light"}function i(e,t){var r="light"===t,a=r?.1:-.1;(e=e.replace(/[^0-9a-f]/gi,"")).length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);var n=parseInt(e.substr(0,2),16),o=parseInt(e.substr(2,2),16),i=parseInt(e.substr(4,2),16),s=u(n,o,i),c=r?1-(1-a)*(1-s[2]):(1+a)*s[2];c=Math.min(Math.max(0,c),1);var l=d(s[0],s[1],c);return n=l[0].toString(16),o=l[1].toString(16),i=l[2].toString(16),"#"+("00"+n).substr(n.length)+("00"+o).substr(o.length)+("00"+i).substr(i.length)}var s=new Map;t.exports={rgbToHsl:u,hslToRgb:d,calculateColorBackground:o,calculateColorReplacement:i,calculateColor:function(e,t){var r,a="".concat(e,":").concat(t);if(s.has(a))return s.get(a);if(!/^#[0-9a-f]+$/i.test(e))return e;for(var n=20;0<=n&&("light"!==(r=o(e))||!0===t)&&("dark"!==r||!0!==t);n--)e=i(e,r);return s.set(a,e),1e3<s.size&&s.delete(s.entries().next().value[0]),e},getRgb:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:{r:0,g:0,b:0}},getHex:function(e){function t(e){return("0"+parseInt(e,10).toString(16)).slice(-2)}return"#"+t(e.r)+t(e.g)+t(e.b)}}},{}],61:[function(e,t,r){"use strict";var a=e("jquery"),n=e("../storage"),o=window.console;try{o=a("iframe")[0].contentWindow.console}catch(e){}function i(e){if(o&&n.get("consoleLog")){for(var t=arguments.length,r=new Array(1<t?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];o[e].apply(o,["BTTV:"].concat(r))}}t.exports={log:i.bind(void 0,"log"),error:i.bind(void 0,"error"),warn:i.bind(void 0,"warn"),info:i.bind(void 0,"info"),version:"7.2.71"}},{"../storage":57,jquery:93}],62:[function(e,t,r){t.exports=["ðŸ‡¦","ðŸ‡§","ðŸ‡¨","ðŸ‡©","ðŸ‡ª","ðŸ‡«","ðŸ‡¬","ðŸ‡­","ðŸ‡®","ðŸ‡¯","ðŸ‡°","ðŸ‡±","ðŸ‡²","ðŸ‡³","ðŸ‡´","ðŸ‡µ","ðŸ‡¶","ðŸ‡·","ðŸ‡¸","ðŸ‡¹","ðŸ‡º","ðŸ‡»","ðŸ‡¼","ðŸ‡½","ðŸ‡¾","ðŸ‡¿","ðŸ…°ï¸","ðŸ†Ž","â“‚ï¸","ðŸ…±ï¸","ðŸ†‘","ðŸ†–","ðŸ…¾ï¸","ðŸ…¿ï¸","ðŸš¾","ðŸ”ž","ðŸ–•","ðŸˆ","ðŸˆ‚ï¸","ðŸˆ·ï¸","ðŸˆ¶","ðŸˆ¯","ðŸ‰","ðŸˆ¹","ðŸˆš","ðŸˆ²","ðŸ‰‘","ðŸˆ¸","ðŸˆ´","ðŸˆ³","ãŠ—ï¸","ãŠ™ï¸","ðŸˆº","ðŸˆµ","#âƒ£ï¸","0âƒ£ï¸","1âƒ£ï¸","2âƒ£ï¸","3âƒ£ï¸","4âƒ£ï¸","5âƒ£ï¸","6âƒ£ï¸","7âƒ£ï¸","8âƒ£ï¸","9âƒ£ï¸","â„¹ï¸"]},{}],63:[function(e,t,r){"use strict";var a=e("./debug");t.exports={url:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=new URL(e,document.currentScript.src);return"".concat(r.toString()).concat(t?"?v=".concat(a.version):"")}}},{"./debug":61}],64:[function(e,t,r){"use strict";
